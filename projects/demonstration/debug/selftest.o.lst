   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"selftest.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.comm	RCC_Clocks,16,4
  19              		.comm	ADC_InitStructure,24,4
  20              		.comm	ADC_CommonInitStructure,16,4
  21              		.comm	ConvData1,2,2
  22              		.comm	ConvData2,2,2
  23              		.global	counter0
  24              		.bss
  25              		.align	1
  28              	counter0:
  29 0000 0000     		.space	2
  30              		.global	counter1
  31              		.align	1
  34              	counter1:
  35 0002 0000     		.space	2
  36              		.global	Idx
  37              		.align	1
  40              	Idx:
  41 0004 0000     		.space	2
  42              		.global	ADC_Channel
  43              		.data
  44              		.align	2
  47              	ADC_Channel:
  48 0000 02       		.byte	2
  49 0001 03       		.byte	3
  50              		.global	DACTest
  51              		.bss
  54              	DACTest:
  55 0006 00       		.space	1
  56              		.global	GPIO_Pin
  57              		.data
  58 0002 0000     		.align	2
  61              	GPIO_Pin:
  62 0004 04       		.byte	4
  63 0005 08       		.byte	8
  64              		.global	count
  65              		.bss
  66 0007 00       		.align	1
  69              	count:
  70 0008 0000     		.space	2
  71              		.global	count1
  72              		.data
  73              		.align	1
  76              	count1:
  77 0006 1800     		.short	24
  78              		.global	Left_Right
  79              		.bss
  80              		.align	1
  83              	Left_Right:
  84 000a 0000     		.space	2
  85              		.global	sinebuf
  86              		.section	.rodata
  87              		.align	2
  90              	sinebuf:
  91 0000 0000     		.short	0
  92 0002 B410     		.short	4276
  93 0004 2021     		.short	8480
  94 0006 FB30     		.short	12539
  95 0008 FF3F     		.short	16383
  96 000a EB4D     		.short	19947
  97 000c 815A     		.short	23169
  98 000e 8B65     		.short	25995
  99 0010 D96E     		.short	28377
 100 0012 4076     		.short	30272
 101 0014 A27B     		.short	31650
 102 0016 E67E     		.short	32486
 103 0018 FF7F     		.short	32767
 104 001a E67E     		.short	32486
 105 001c A27B     		.short	31650
 106 001e 4076     		.short	30272
 107 0020 D96E     		.short	28377
 108 0022 8B65     		.short	25995
 109 0024 815A     		.short	23169
 110 0026 EB4D     		.short	19947
 111 0028 FF3F     		.short	16383
 112 002a FB30     		.short	12539
 113 002c 2021     		.short	8480
 114 002e B410     		.short	4276
 115 0030 0000     		.short	0
 116 0032 4CEF     		.short	-4276
 117 0034 E0DE     		.short	-8480
 118 0036 05CF     		.short	-12539
 119 0038 01C0     		.short	-16383
 120 003a 15B2     		.short	-19947
 121 003c 7FA5     		.short	-23169
 122 003e 759A     		.short	-25995
 123 0040 2791     		.short	-28377
 124 0042 C089     		.short	-30272
 125 0044 5E84     		.short	-31650
 126 0046 1A81     		.short	-32486
 127 0048 0180     		.short	-32767
 128 004a 1A81     		.short	-32486
 129 004c 5E84     		.short	-31650
 130 004e C089     		.short	-30272
 131 0050 2791     		.short	-28377
 132 0052 759A     		.short	-25995
 133 0054 7FA5     		.short	-23169
 134 0056 15B2     		.short	-19947
 135 0058 01C0     		.short	-16383
 136 005a 05CF     		.short	-12539
 137 005c E0DE     		.short	-8480
 138 005e 4CEF     		.short	-4276
 139              		.text
 140              		.align	2
 141              		.global	Accelerometer_MEMS_Test
 142              		.thumb
 143              		.thumb_func
 145              	Accelerometer_MEMS_Test:
 146              	.LFB110:
 147              		.file 1 "../selftest.c"
   1:../selftest.c **** /**
   2:../selftest.c ****   ******************************************************************************
   3:../selftest.c ****   * @file    selftest.c
   4:../selftest.c ****   * @author  MCD Application Team
   5:../selftest.c ****   * @version V1.0.0
   6:../selftest.c ****   * @date    19-September-2011
   7:../selftest.c ****   * @brief   This file provides the hardware tests
   8:../selftest.c ****   ******************************************************************************
   9:../selftest.c ****   * @attention
  10:../selftest.c ****   *
  11:../selftest.c ****   * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  12:../selftest.c ****   * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  13:../selftest.c ****   * TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY
  14:../selftest.c ****   * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  15:../selftest.c ****   * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  16:../selftest.c ****   * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  17:../selftest.c ****   *
  18:../selftest.c ****   * <h2><center>&copy; COPYRIGHT 2011 STMicroelectronics</center></h2>
  19:../selftest.c ****   */ 
  20:../selftest.c **** 
  21:../selftest.c **** /* Includes ------------------------------------------------------------------*/
  22:../selftest.c **** #include "selftest.h"
  23:../selftest.c **** 
  24:../selftest.c **** 
  25:../selftest.c **** /* Private typedef -----------------------------------------------------------*/
  26:../selftest.c **** /* Private define ------------------------------------------------------------*/
  27:../selftest.c **** #define MEMS_PASSCONDITION              15
  28:../selftest.c **** /* Private macro -------------------------------------------------------------*/
  29:../selftest.c **** /* Private variables ---------------------------------------------------------*/
  30:../selftest.c **** /* Init Structure definition */
  31:../selftest.c **** RCC_ClocksTypeDef      RCC_Clocks;
  32:../selftest.c **** ADC_InitTypeDef        ADC_InitStructure;
  33:../selftest.c **** ADC_CommonInitTypeDef  ADC_CommonInitStructure;
  34:../selftest.c **** 
  35:../selftest.c **** __IO uint16_t ConvData1, ConvData2;
  36:../selftest.c **** __IO uint16_t counter0 = 0, counter1 = 0, Idx = 0;
  37:../selftest.c **** uint8_t ADC_Channel[2] = {ADC_Channel_2, ADC_Channel_3};
  38:../selftest.c **** uint8_t DACTest = 0;
  39:../selftest.c **** uint8_t GPIO_Pin [2] = {GPIO_Pin_2, GPIO_Pin_3};
  40:../selftest.c **** 
  41:../selftest.c **** uint16_t count = 0, count1 = 24, Left_Right = 0;
  42:../selftest.c **** const int16_t sinebuf[48] = {0, 4276, 8480, 12539, 16383, 19947, 23169, 25995,
  43:../selftest.c ****                              28377, 30272, 31650, 32486, 32767, 32486, 31650, 30272,
  44:../selftest.c ****                              28377, 25995, 23169, 19947, 16383, 12539, 8480, 4276,
  45:../selftest.c ****                              0, -4276, -8480, -12539, -16383, -19947, -23169, -25995,
  46:../selftest.c ****                              -28377, -30272, -31650, -32486, -32767, -32486, -31650, -30272,
  47:../selftest.c ****                              -28377, -25995, -23169, -19947, -16383, -12539, -8480, -4276
  48:../selftest.c ****                              };
  49:../selftest.c **** extern __IO uint32_t TimingDelay;
  50:../selftest.c **** 
  51:../selftest.c **** extern LIS302DL_InitTypeDef  LIS302DL_InitStruct;
  52:../selftest.c **** extern LIS302DL_FilterConfigTypeDef LIS302DL_FilterStruct;  
  53:../selftest.c **** 
  54:../selftest.c **** extern __IO int8_t X_Offset, Y_Offset, Z_Offset;
  55:../selftest.c **** extern uint8_t Buffer[6];
  56:../selftest.c **** /* Private function prototypes -----------------------------------------------*/
  57:../selftest.c **** /* Private functions ---------------------------------------------------------*/
  58:../selftest.c **** /**
  59:../selftest.c ****   * @brief Test MEMS Hardware.
  60:../selftest.c ****   *   The main objectif of this test is to check the hardware connection of the 
  61:../selftest.c ****   *   MEMS peripheral.
  62:../selftest.c ****   * @param None
  63:../selftest.c ****   * @retval None
  64:../selftest.c ****   */
  65:../selftest.c **** void Accelerometer_MEMS_Test(void)
  66:../selftest.c **** {
 148              		.loc 1 66 0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 8
 151              		@ frame_needed = 1, uses_anonymous_args = 0
 152 0000 80B5     		push	{r7, lr}
 153              	.LCFI0:
 154              		.cfi_def_cfa_offset 8
 155              		.cfi_offset 14, -4
 156              		.cfi_offset 7, -8
 157 0002 82B0     		sub	sp, sp, #8
 158              	.LCFI1:
 159              		.cfi_def_cfa_offset 16
 160 0004 00AF     		add	r7, sp, #0
 161              	.LCFI2:
 162              		.cfi_def_cfa_register 7
  67:../selftest.c ****   uint8_t temp, memsteststatus = 0x00;
 163              		.loc 1 67 0
 164 0006 4FF00003 		mov	r3, #0
 165 000a FB71     		strb	r3, [r7, #7]
  68:../selftest.c ****   uint8_t xdata, ydata = 0;
 166              		.loc 1 68 0
 167 000c 4FF00003 		mov	r3, #0
 168 0010 BB71     		strb	r3, [r7, #6]
  69:../selftest.c ****   
  70:../selftest.c ****   /* MEMS configuration ------------------------------------------------------*/
  71:../selftest.c ****   /* Set configuration of LIS302DL*/
  72:../selftest.c ****   LIS302DL_InitStruct.Power_Mode = LIS302DL_LOWPOWERMODE_ACTIVE;
 169              		.loc 1 72 0
 170 0012 40F20003 		movw	r3, #:lower16:LIS302DL_InitStruct
 171 0016 C0F20003 		movt	r3, #:upper16:LIS302DL_InitStruct
 172 001a 4FF04002 		mov	r2, #64
 173 001e 1A70     		strb	r2, [r3, #0]
  73:../selftest.c ****   LIS302DL_InitStruct.Output_DataRate = LIS302DL_DATARATE_100;
 174              		.loc 1 73 0
 175 0020 40F20003 		movw	r3, #:lower16:LIS302DL_InitStruct
 176 0024 C0F20003 		movt	r3, #:upper16:LIS302DL_InitStruct
 177 0028 4FF00002 		mov	r2, #0
 178 002c 5A70     		strb	r2, [r3, #1]
  74:../selftest.c ****   LIS302DL_InitStruct.Axes_Enable = LIS302DL_X_ENABLE | LIS302DL_Y_ENABLE;
 179              		.loc 1 74 0
 180 002e 40F20003 		movw	r3, #:lower16:LIS302DL_InitStruct
 181 0032 C0F20003 		movt	r3, #:upper16:LIS302DL_InitStruct
 182 0036 4FF00302 		mov	r2, #3
 183 003a 9A70     		strb	r2, [r3, #2]
  75:../selftest.c ****   LIS302DL_InitStruct.Full_Scale = LIS302DL_FULLSCALE_2_3;
 184              		.loc 1 75 0
 185 003c 40F20003 		movw	r3, #:lower16:LIS302DL_InitStruct
 186 0040 C0F20003 		movt	r3, #:upper16:LIS302DL_InitStruct
 187 0044 4FF00002 		mov	r2, #0
 188 0048 DA70     		strb	r2, [r3, #3]
  76:../selftest.c ****   LIS302DL_InitStruct.Self_Test = LIS302DL_SELFTEST_NORMAL;
 189              		.loc 1 76 0
 190 004a 40F20003 		movw	r3, #:lower16:LIS302DL_InitStruct
 191 004e C0F20003 		movt	r3, #:upper16:LIS302DL_InitStruct
 192 0052 4FF00002 		mov	r2, #0
 193 0056 1A71     		strb	r2, [r3, #4]
  77:../selftest.c ****   LIS302DL_Init(&LIS302DL_InitStruct);
 194              		.loc 1 77 0
 195 0058 40F20000 		movw	r0, #:lower16:LIS302DL_InitStruct
 196 005c C0F20000 		movt	r0, #:upper16:LIS302DL_InitStruct
 197 0060 FFF7FEFF 		bl	LIS302DL_Init
  78:../selftest.c ****   
  79:../selftest.c ****   /* Set configuration of Internal High Pass Filter of LIS302DL*/
  80:../selftest.c ****   LIS302DL_FilterStruct.HighPassFilter_Data_Selection = LIS302DL_FILTEREDDATASELECTION_OUTPUTREGIST
 198              		.loc 1 80 0
 199 0064 40F20003 		movw	r3, #:lower16:LIS302DL_FilterStruct
 200 0068 C0F20003 		movt	r3, #:upper16:LIS302DL_FilterStruct
 201 006c 4FF02002 		mov	r2, #32
 202 0070 1A70     		strb	r2, [r3, #0]
  81:../selftest.c ****   LIS302DL_FilterStruct.HighPassFilter_CutOff_Frequency = LIS302DL_HIGHPASSFILTER_LEVEL_1;
 203              		.loc 1 81 0
 204 0072 40F20003 		movw	r3, #:lower16:LIS302DL_FilterStruct
 205 0076 C0F20003 		movt	r3, #:upper16:LIS302DL_FilterStruct
 206 007a 4FF00102 		mov	r2, #1
 207 007e 5A70     		strb	r2, [r3, #1]
  82:../selftest.c ****   LIS302DL_FilterStruct.HighPassFilter_Interrupt = LIS302DL_HIGHPASSFILTERINTERRUPT_1_2;
 208              		.loc 1 82 0
 209 0080 40F20003 		movw	r3, #:lower16:LIS302DL_FilterStruct
 210 0084 C0F20003 		movt	r3, #:upper16:LIS302DL_FilterStruct
 211 0088 4FF00C02 		mov	r2, #12
 212 008c 9A70     		strb	r2, [r3, #2]
  83:../selftest.c ****   LIS302DL_FilterConfig(&LIS302DL_FilterStruct);
 213              		.loc 1 83 0
 214 008e 40F20000 		movw	r0, #:lower16:LIS302DL_FilterStruct
 215 0092 C0F20000 		movt	r0, #:upper16:LIS302DL_FilterStruct
 216 0096 FFF7FEFF 		bl	LIS302DL_FilterConfig
  84:../selftest.c ****   
  85:../selftest.c ****   /* Required delay for the MEMS Accelerometre: Turn-on time = 3/Output data Rate 
  86:../selftest.c ****                                                              = 3/100 = 30ms */
  87:../selftest.c ****   Delay(30);
 217              		.loc 1 87 0
 218 009a 4FF01E00 		mov	r0, #30
 219 009e FFF7FEFF 		bl	Delay
  88:../selftest.c ****   
  89:../selftest.c ****   /* Read WHO_AM_I register */
  90:../selftest.c ****   LIS302DL_Read(&temp, LIS302DL_WHO_AM_I_ADDR, 1);
 220              		.loc 1 90 0
 221 00a2 07F10403 		add	r3, r7, #4
 222 00a6 1846     		mov	r0, r3
 223 00a8 4FF00F01 		mov	r1, #15
 224 00ac 4FF00102 		mov	r2, #1
 225 00b0 FFF7FEFF 		bl	LIS302DL_Read
  91:../selftest.c ****   
  92:../selftest.c ****   /* Check device identification register, this register should contains 
  93:../selftest.c ****   the device identifier that for LIS302DL is set to 0x3B */
  94:../selftest.c ****   if (temp != 0x3B)
 226              		.loc 1 94 0
 227 00b4 3B79     		ldrb	r3, [r7, #4]	@ zero_extendqisi2
 228 00b6 3B2B     		cmp	r3, #59
 229 00b8 01D0     		beq	.L2
  95:../selftest.c ****   {
  96:../selftest.c ****     Fail_Handler();
 230              		.loc 1 96 0
 231 00ba FFF7FEFF 		bl	Fail_Handler
 232              	.L2:
  97:../selftest.c ****   }
  98:../selftest.c **** 
  99:../selftest.c ****   TimingDelay = 500;
 233              		.loc 1 99 0
 234 00be 40F20003 		movw	r3, #:lower16:TimingDelay
 235 00c2 C0F20003 		movt	r3, #:upper16:TimingDelay
 236 00c6 4FF4FA72 		mov	r2, #500
 237 00ca 1A60     		str	r2, [r3, #0]
 100:../selftest.c ****   /* Wait until detecting all MEMS direction or timeout */
 101:../selftest.c ****   while((memsteststatus == 0x00)&&(TimingDelay != 0x00))
 238              		.loc 1 101 0
 239 00cc 28E0     		b	.L3
 240              	.L6:
 102:../selftest.c ****   {
 103:../selftest.c ****     LIS302DL_Read(Buffer, LIS302DL_OUT_X_ADDR, 4);
 241              		.loc 1 103 0
 242 00ce 40F20000 		movw	r0, #:lower16:Buffer
 243 00d2 C0F20000 		movt	r0, #:upper16:Buffer
 244 00d6 4FF02901 		mov	r1, #41
 245 00da 4FF00402 		mov	r2, #4
 246 00de FFF7FEFF 		bl	LIS302DL_Read
 104:../selftest.c ****     xdata = ABS((int8_t)(Buffer[0]));
 247              		.loc 1 104 0
 248 00e2 40F20003 		movw	r3, #:lower16:Buffer
 249 00e6 C0F20003 		movt	r3, #:upper16:Buffer
 250 00ea 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 251 00ec DBB2     		uxtb	r3, r3
 252 00ee 5BB2     		sxtb	r3, r3
 253 00f0 002B     		cmp	r3, #0
 254 00f2 B8BF     		it	lt
 255 00f4 5B42     		rsblt	r3, r3, #0
 256 00f6 7B71     		strb	r3, [r7, #5]
 105:../selftest.c ****     ydata = ABS((int8_t)(Buffer[2]));
 257              		.loc 1 105 0
 258 00f8 40F20003 		movw	r3, #:lower16:Buffer
 259 00fc C0F20003 		movt	r3, #:upper16:Buffer
 260 0100 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 261 0102 DBB2     		uxtb	r3, r3
 262 0104 5BB2     		sxtb	r3, r3
 263 0106 002B     		cmp	r3, #0
 264 0108 B8BF     		it	lt
 265 010a 5B42     		rsblt	r3, r3, #0
 266 010c BB71     		strb	r3, [r7, #6]
 106:../selftest.c ****     /* Check test PASS condition */   
 107:../selftest.c ****     if ((xdata > MEMS_PASSCONDITION) || (ydata > MEMS_PASSCONDITION)) 
 267              		.loc 1 107 0
 268 010e 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 269 0110 0F2B     		cmp	r3, #15
 270 0112 02D8     		bhi	.L4
 271              		.loc 1 107 0 is_stmt 0 discriminator 1
 272 0114 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 273 0116 0F2B     		cmp	r3, #15
 274 0118 02D9     		bls	.L3
 275              	.L4:
 108:../selftest.c ****     {
 109:../selftest.c ****       /* MEMS Test PASS */
 110:../selftest.c ****       memsteststatus = 0x01;
 276              		.loc 1 110 0 is_stmt 1
 277 011a 4FF00103 		mov	r3, #1
 278 011e FB71     		strb	r3, [r7, #7]
 279              	.L3:
 101:../selftest.c ****   while((memsteststatus == 0x00)&&(TimingDelay != 0x00))
 280              		.loc 1 101 0 discriminator 1
 281 0120 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 282 0122 002B     		cmp	r3, #0
 283 0124 06D1     		bne	.L5
 101:../selftest.c ****   while((memsteststatus == 0x00)&&(TimingDelay != 0x00))
 284              		.loc 1 101 0 is_stmt 0 discriminator 2
 285 0126 40F20003 		movw	r3, #:lower16:TimingDelay
 286 012a C0F20003 		movt	r3, #:upper16:TimingDelay
 287 012e 1B68     		ldr	r3, [r3, #0]
 288 0130 002B     		cmp	r3, #0
 289 0132 CCD1     		bne	.L6
 290              	.L5:
 111:../selftest.c ****     }
 112:../selftest.c ****   }
 113:../selftest.c ****   
 114:../selftest.c ****   /* MEMS test status: PASS */ 
 115:../selftest.c ****   if(memsteststatus != 0x00)
 291              		.loc 1 115 0 is_stmt 1
 292 0134 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 293 0136 002B     		cmp	r3, #0
 294 0138 18D0     		beq	.L7
 116:../selftest.c ****   {
 117:../selftest.c ****     /* Turn Green LED ON: signaling MEMS Test PASS */
 118:../selftest.c ****     STM_EVAL_LEDOn(LED4);
 295              		.loc 1 118 0
 296 013a 4FF00000 		mov	r0, #0
 297 013e FFF7FEFF 		bl	STM_EVAL_LEDOn
 119:../selftest.c ****     
 120:../selftest.c ****     /* Waiting User Button is pressed */
 121:../selftest.c ****     while (STM_EVAL_PBGetState(BUTTON_USER) == Bit_RESET)
 298              		.loc 1 121 0
 299 0142 00BF     		nop
 300              	.L8:
 301              		.loc 1 121 0 is_stmt 0 discriminator 1
 302 0144 4FF00000 		mov	r0, #0
 303 0148 FFF7FEFF 		bl	STM_EVAL_PBGetState
 304 014c 0346     		mov	r3, r0
 305 014e 002B     		cmp	r3, #0
 306 0150 F8D0     		beq	.L8
 122:../selftest.c ****     {}
 123:../selftest.c ****     
 124:../selftest.c ****     /* Waiting User Button is Released */
 125:../selftest.c ****     while (STM_EVAL_PBGetState(BUTTON_USER) == Bit_SET)
 307              		.loc 1 125 0 is_stmt 1
 308 0152 00BF     		nop
 309              	.L9:
 310              		.loc 1 125 0 is_stmt 0 discriminator 1
 311 0154 4FF00000 		mov	r0, #0
 312 0158 FFF7FEFF 		bl	STM_EVAL_PBGetState
 313 015c 0346     		mov	r3, r0
 314 015e 012B     		cmp	r3, #1
 315 0160 F8D0     		beq	.L9
 126:../selftest.c ****     {}
 127:../selftest.c ****     
 128:../selftest.c ****     /* Turn Green LED OFF: signaling the end of MEMS Test and switching to 
 129:../selftest.c ****        the next Sub Test */
 130:../selftest.c ****     STM_EVAL_LEDOff(LED4);
 316              		.loc 1 130 0 is_stmt 1
 317 0162 4FF00000 		mov	r0, #0
 318 0166 FFF7FEFF 		bl	STM_EVAL_LEDOff
 319 016a 01E0     		b	.L1
 320              	.L7:
 131:../selftest.c ****   }
 132:../selftest.c ****   /* MEMS test status: Timeout occurs */
 133:../selftest.c ****   else
 134:../selftest.c ****   {
 135:../selftest.c ****     Fail_Handler();
 321              		.loc 1 135 0
 322 016c FFF7FEFF 		bl	Fail_Handler
 323              	.L1:
 136:../selftest.c ****   }
 137:../selftest.c **** }
 324              		.loc 1 137 0
 325 0170 07F10807 		add	r7, r7, #8
 326 0174 BD46     		mov	sp, r7
 327 0176 80BD     		pop	{r7, pc}
 328              		.cfi_endproc
 329              	.LFE110:
 331              		.align	2
 332              		.global	USB_Test
 333              		.thumb
 334              		.thumb_func
 336              	USB_Test:
 337              	.LFB111:
 138:../selftest.c **** 
 139:../selftest.c **** /**
 140:../selftest.c ****   * @brief Test USB Hardware.
 141:../selftest.c ****   *   The main objectif of this test is to check the hardware connection of the 
 142:../selftest.c ****   *   Audio and USB peripheral.
 143:../selftest.c ****   * @param None
 144:../selftest.c ****   * @retval None
 145:../selftest.c ****   */
 146:../selftest.c **** void USB_Test(void)
 147:../selftest.c **** {
 338              		.loc 1 147 0
 339              		.cfi_startproc
 340              		@ args = 0, pretend = 0, frame = 8
 341              		@ frame_needed = 1, uses_anonymous_args = 0
 342 0178 80B5     		push	{r7, lr}
 343              	.LCFI3:
 344              		.cfi_def_cfa_offset 8
 345              		.cfi_offset 14, -4
 346              		.cfi_offset 7, -8
 347 017a 82B0     		sub	sp, sp, #8
 348              	.LCFI4:
 349              		.cfi_def_cfa_offset 16
 350 017c 00AF     		add	r7, sp, #0
 351              	.LCFI5:
 352              		.cfi_def_cfa_register 7
 148:../selftest.c ****   GPIO_InitTypeDef GPIO_InitStructure;
 149:../selftest.c **** 
 150:../selftest.c ****   /******************************** USB Test **********************************/
 151:../selftest.c ****   
 152:../selftest.c ****   /*----------------- Part1: without cables connected ------------------------*/ 
 153:../selftest.c ****   
 154:../selftest.c ****   /* GPIOA, GPIOC and GPIOD clock enable */
 155:../selftest.c ****   RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA | RCC_AHB1Periph_GPIOC | \
 353              		.loc 1 155 0
 354 017e 4FF00D00 		mov	r0, #13
 355 0182 4FF00101 		mov	r1, #1
 356 0186 FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 156:../selftest.c ****                          RCC_AHB1Periph_GPIOD, ENABLE);
 157:../selftest.c ****   
 158:../selftest.c ****   /* GPIOD Configuration: Pins 5 in output push-pull */
 159:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;
 357              		.loc 1 159 0
 358 018a 4FF02003 		mov	r3, #32
 359 018e 3B60     		str	r3, [r7, #0]
 160:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 360              		.loc 1 160 0
 361 0190 4FF00103 		mov	r3, #1
 362 0194 3B71     		strb	r3, [r7, #4]
 161:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 363              		.loc 1 161 0
 364 0196 4FF00003 		mov	r3, #0
 365 019a BB71     		strb	r3, [r7, #6]
 162:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 366              		.loc 1 162 0
 367 019c 4FF00003 		mov	r3, #0
 368 01a0 FB71     		strb	r3, [r7, #7]
 163:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 369              		.loc 1 163 0
 370 01a2 4FF00203 		mov	r3, #2
 371 01a6 7B71     		strb	r3, [r7, #5]
 164:../selftest.c ****   GPIO_Init(GPIOD, &GPIO_InitStructure);
 372              		.loc 1 164 0
 373 01a8 4FF44060 		mov	r0, #3072
 374 01ac C4F20200 		movt	r0, 16386
 375 01b0 3B46     		mov	r3, r7
 376 01b2 1946     		mov	r1, r3
 377 01b4 FFF7FEFF 		bl	GPIO_Init
 165:../selftest.c ****   
 166:../selftest.c ****   /* Turn LED8 ON using PD5 */
 167:../selftest.c ****   GPIO_ResetBits(GPIOD, GPIO_Pin_5);
 378              		.loc 1 167 0
 379 01b8 4FF44060 		mov	r0, #3072
 380 01bc C4F20200 		movt	r0, 16386
 381 01c0 4FF02001 		mov	r1, #32
 382 01c4 FFF7FEFF 		bl	GPIO_ResetBits
 168:../selftest.c ****   
 169:../selftest.c ****   /* GPIOC Configuration: Pin 0 in output push-pull */
 170:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;
 383              		.loc 1 170 0
 384 01c8 4FF00103 		mov	r3, #1
 385 01cc 3B60     		str	r3, [r7, #0]
 171:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 386              		.loc 1 171 0
 387 01ce 4FF00103 		mov	r3, #1
 388 01d2 3B71     		strb	r3, [r7, #4]
 172:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 389              		.loc 1 172 0
 390 01d4 4FF00003 		mov	r3, #0
 391 01d8 BB71     		strb	r3, [r7, #6]
 173:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 392              		.loc 1 173 0
 393 01da 4FF00003 		mov	r3, #0
 394 01de FB71     		strb	r3, [r7, #7]
 174:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 395              		.loc 1 174 0
 396 01e0 4FF00203 		mov	r3, #2
 397 01e4 7B71     		strb	r3, [r7, #5]
 175:../selftest.c ****   GPIO_Init(GPIOC, &GPIO_InitStructure);
 398              		.loc 1 175 0
 399 01e6 4FF40060 		mov	r0, #2048
 400 01ea C4F20200 		movt	r0, 16386
 401 01ee 3B46     		mov	r3, r7
 402 01f0 1946     		mov	r1, r3
 403 01f2 FFF7FEFF 		bl	GPIO_Init
 176:../selftest.c ****   
 177:../selftest.c ****   /* GPIOA Configuration: Pin 9 in input pull-up */
 178:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 404              		.loc 1 178 0
 405 01f6 4FF40073 		mov	r3, #512
 406 01fa 3B60     		str	r3, [r7, #0]
 179:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 407              		.loc 1 179 0
 408 01fc 4FF00003 		mov	r3, #0
 409 0200 3B71     		strb	r3, [r7, #4]
 180:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 410              		.loc 1 180 0
 411 0202 4FF00003 		mov	r3, #0
 412 0206 BB71     		strb	r3, [r7, #6]
 181:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 413              		.loc 1 181 0
 414 0208 4FF00003 		mov	r3, #0
 415 020c FB71     		strb	r3, [r7, #7]
 182:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 416              		.loc 1 182 0
 417 020e 4FF00203 		mov	r3, #2
 418 0212 7B71     		strb	r3, [r7, #5]
 183:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 419              		.loc 1 183 0
 420 0214 4FF00000 		mov	r0, #0
 421 0218 C4F20200 		movt	r0, 16386
 422 021c 3B46     		mov	r3, r7
 423 021e 1946     		mov	r1, r3
 424 0220 FFF7FEFF 		bl	GPIO_Init
 184:../selftest.c ****   
 185:../selftest.c ****   /* Turn LED7 ON using PC0 (5v) */
 186:../selftest.c ****   GPIO_ResetBits(GPIOC, GPIO_Pin_0); 
 425              		.loc 1 186 0
 426 0224 4FF40060 		mov	r0, #2048
 427 0228 C4F20200 		movt	r0, 16386
 428 022c 4FF00101 		mov	r1, #1
 429 0230 FFF7FEFF 		bl	GPIO_ResetBits
 187:../selftest.c ****   
 188:../selftest.c ****   /* Waiting delay 10ms */
 189:../selftest.c ****   Delay(1);
 430              		.loc 1 189 0
 431 0234 4FF00100 		mov	r0, #1
 432 0238 FFF7FEFF 		bl	Delay
 190:../selftest.c ****   
 191:../selftest.c ****   if (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_9) == Bit_RESET)
 433              		.loc 1 191 0
 434 023c 4FF00000 		mov	r0, #0
 435 0240 C4F20200 		movt	r0, 16386
 436 0244 4FF40071 		mov	r1, #512
 437 0248 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 438 024c 0346     		mov	r3, r0
 439 024e 002B     		cmp	r3, #0
 440 0250 01D1     		bne	.L12
 192:../selftest.c ****   {
 193:../selftest.c ****     Fail_Handler();
 441              		.loc 1 193 0
 442 0252 FFF7FEFF 		bl	Fail_Handler
 443              	.L12:
 194:../selftest.c ****   }
 195:../selftest.c ****   
 196:../selftest.c ****   /* GPIOA Configuration: Pins 10 in output push-pull */
 197:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
 444              		.loc 1 197 0
 445 0256 4FF48063 		mov	r3, #1024
 446 025a 3B60     		str	r3, [r7, #0]
 198:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 447              		.loc 1 198 0
 448 025c 4FF00003 		mov	r3, #0
 449 0260 3B71     		strb	r3, [r7, #4]
 199:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 450              		.loc 1 199 0
 451 0262 4FF00003 		mov	r3, #0
 452 0266 BB71     		strb	r3, [r7, #6]
 200:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 453              		.loc 1 200 0
 454 0268 4FF00103 		mov	r3, #1
 455 026c FB71     		strb	r3, [r7, #7]
 201:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 456              		.loc 1 201 0
 457 026e 4FF00203 		mov	r3, #2
 458 0272 7B71     		strb	r3, [r7, #5]
 202:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 459              		.loc 1 202 0
 460 0274 4FF00000 		mov	r0, #0
 461 0278 C4F20200 		movt	r0, 16386
 462 027c 3B46     		mov	r3, r7
 463 027e 1946     		mov	r1, r3
 464 0280 FFF7FEFF 		bl	GPIO_Init
 203:../selftest.c ****   
 204:../selftest.c ****   /* Waiting delay 10ms */
 205:../selftest.c ****   Delay(1);
 465              		.loc 1 205 0
 466 0284 4FF00100 		mov	r0, #1
 467 0288 FFF7FEFF 		bl	Delay
 206:../selftest.c ****   
 207:../selftest.c ****   /* Check the ID level without cable connected */
 208:../selftest.c ****   if (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_10) == Bit_RESET)
 468              		.loc 1 208 0
 469 028c 4FF00000 		mov	r0, #0
 470 0290 C4F20200 		movt	r0, 16386
 471 0294 4FF48061 		mov	r1, #1024
 472 0298 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 473 029c 0346     		mov	r3, r0
 474 029e 002B     		cmp	r3, #0
 475 02a0 01D1     		bne	.L13
 209:../selftest.c ****   {
 210:../selftest.c ****     Fail_Handler();
 476              		.loc 1 210 0
 477 02a2 FFF7FEFF 		bl	Fail_Handler
 478              	.L13:
 211:../selftest.c ****   }
 212:../selftest.c ****   
 213:../selftest.c ****   /* Turn LED7 OFF using PC0 */
 214:../selftest.c ****   GPIO_SetBits(GPIOC, GPIO_Pin_0);  
 479              		.loc 1 214 0
 480 02a6 4FF40060 		mov	r0, #2048
 481 02aa C4F20200 		movt	r0, 16386
 482 02ae 4FF00101 		mov	r1, #1
 483 02b2 FFF7FEFF 		bl	GPIO_SetBits
 215:../selftest.c ****   
 216:../selftest.c ****   /* GPIOA Configuration: Pins 11, 12 in input pull-up */
 217:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11 | GPIO_Pin_12;
 484              		.loc 1 217 0
 485 02b6 4FF4C053 		mov	r3, #6144
 486 02ba 3B60     		str	r3, [r7, #0]
 218:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 487              		.loc 1 218 0
 488 02bc 4FF00003 		mov	r3, #0
 489 02c0 3B71     		strb	r3, [r7, #4]
 219:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 490              		.loc 1 219 0
 491 02c2 4FF00003 		mov	r3, #0
 492 02c6 BB71     		strb	r3, [r7, #6]
 220:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 493              		.loc 1 220 0
 494 02c8 4FF00103 		mov	r3, #1
 495 02cc FB71     		strb	r3, [r7, #7]
 221:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 496              		.loc 1 221 0
 497 02ce 4FF00203 		mov	r3, #2
 498 02d2 7B71     		strb	r3, [r7, #5]
 222:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 499              		.loc 1 222 0
 500 02d4 4FF00000 		mov	r0, #0
 501 02d8 C4F20200 		movt	r0, 16386
 502 02dc 3B46     		mov	r3, r7
 503 02de 1946     		mov	r1, r3
 504 02e0 FFF7FEFF 		bl	GPIO_Init
 223:../selftest.c ****   
 224:../selftest.c ****   /* GPIOA Configuration: Pin 9 in output push-pull */
 225:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 505              		.loc 1 225 0
 506 02e4 4FF40073 		mov	r3, #512
 507 02e8 3B60     		str	r3, [r7, #0]
 226:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 508              		.loc 1 226 0
 509 02ea 4FF00103 		mov	r3, #1
 510 02ee 3B71     		strb	r3, [r7, #4]
 227:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 511              		.loc 1 227 0
 512 02f0 4FF00003 		mov	r3, #0
 513 02f4 BB71     		strb	r3, [r7, #6]
 228:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 514              		.loc 1 228 0
 515 02f6 4FF00103 		mov	r3, #1
 516 02fa FB71     		strb	r3, [r7, #7]
 229:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 517              		.loc 1 229 0
 518 02fc 4FF00203 		mov	r3, #2
 519 0300 7B71     		strb	r3, [r7, #5]
 230:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 520              		.loc 1 230 0
 521 0302 4FF00000 		mov	r0, #0
 522 0306 C4F20200 		movt	r0, 16386
 523 030a 3B46     		mov	r3, r7
 524 030c 1946     		mov	r1, r3
 525 030e FFF7FEFF 		bl	GPIO_Init
 231:../selftest.c ****   GPIO_ResetBits(GPIOA, GPIO_Pin_9);
 526              		.loc 1 231 0
 527 0312 4FF00000 		mov	r0, #0
 528 0316 C4F20200 		movt	r0, 16386
 529 031a 4FF40071 		mov	r1, #512
 530 031e FFF7FEFF 		bl	GPIO_ResetBits
 232:../selftest.c ****   
 233:../selftest.c ****   /* Waiting delay 10ms */
 234:../selftest.c ****   Delay(1);
 531              		.loc 1 234 0
 532 0322 4FF00100 		mov	r0, #1
 533 0326 FFF7FEFF 		bl	Delay
 235:../selftest.c ****   
 236:../selftest.c ****   /* Check PA11 and PA12 level without cable connected */
 237:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET) || \
 534              		.loc 1 237 0
 535 032a 4FF00000 		mov	r0, #0
 536 032e C4F20200 		movt	r0, 16386
 537 0332 4FF40061 		mov	r1, #2048
 538 0336 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 539 033a 0346     		mov	r3, r0
 540 033c 002B     		cmp	r3, #0
 541 033e 0AD0     		beq	.L14
 238:../selftest.c ****       (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_12) == Bit_RESET))
 542              		.loc 1 238 0 discriminator 1
 543 0340 4FF00000 		mov	r0, #0
 544 0344 C4F20200 		movt	r0, 16386
 545 0348 4FF48051 		mov	r1, #4096
 546 034c FFF7FEFF 		bl	GPIO_ReadInputDataBit
 547 0350 0346     		mov	r3, r0
 237:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET) || \
 548              		.loc 1 237 0 discriminator 1
 549 0352 002B     		cmp	r3, #0
 550 0354 01D1     		bne	.L15
 551              	.L14:
 239:../selftest.c ****   {
 240:../selftest.c ****     Fail_Handler();
 552              		.loc 1 240 0
 553 0356 FFF7FEFF 		bl	Fail_Handler
 554              	.L15:
 241:../selftest.c ****   }
 242:../selftest.c ****   
 243:../selftest.c ****   /* GPIOA Configuration: Pins 12 in input pull-up */
 244:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;
 555              		.loc 1 244 0
 556 035a 4FF48053 		mov	r3, #4096
 557 035e 3B60     		str	r3, [r7, #0]
 245:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 558              		.loc 1 245 0
 559 0360 4FF00003 		mov	r3, #0
 560 0364 3B71     		strb	r3, [r7, #4]
 246:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 561              		.loc 1 246 0
 562 0366 4FF00003 		mov	r3, #0
 563 036a BB71     		strb	r3, [r7, #6]
 247:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 564              		.loc 1 247 0
 565 036c 4FF00103 		mov	r3, #1
 566 0370 FB71     		strb	r3, [r7, #7]
 248:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 567              		.loc 1 248 0
 568 0372 4FF00203 		mov	r3, #2
 569 0376 7B71     		strb	r3, [r7, #5]
 249:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 570              		.loc 1 249 0
 571 0378 4FF00000 		mov	r0, #0
 572 037c C4F20200 		movt	r0, 16386
 573 0380 3B46     		mov	r3, r7
 574 0382 1946     		mov	r1, r3
 575 0384 FFF7FEFF 		bl	GPIO_Init
 250:../selftest.c ****   
 251:../selftest.c ****   /* GPIOA Configuration: Pin 11 in output push-pull */
 252:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
 576              		.loc 1 252 0
 577 0388 4FF40063 		mov	r3, #2048
 578 038c 3B60     		str	r3, [r7, #0]
 253:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 579              		.loc 1 253 0
 580 038e 4FF00103 		mov	r3, #1
 581 0392 3B71     		strb	r3, [r7, #4]
 254:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 582              		.loc 1 254 0
 583 0394 4FF00003 		mov	r3, #0
 584 0398 BB71     		strb	r3, [r7, #6]
 255:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 585              		.loc 1 255 0
 586 039a 4FF00103 		mov	r3, #1
 587 039e FB71     		strb	r3, [r7, #7]
 256:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 588              		.loc 1 256 0
 589 03a0 4FF00203 		mov	r3, #2
 590 03a4 7B71     		strb	r3, [r7, #5]
 257:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 591              		.loc 1 257 0
 592 03a6 4FF00000 		mov	r0, #0
 593 03aa C4F20200 		movt	r0, 16386
 594 03ae 3B46     		mov	r3, r7
 595 03b0 1946     		mov	r1, r3
 596 03b2 FFF7FEFF 		bl	GPIO_Init
 258:../selftest.c ****   GPIO_ResetBits(GPIOA, GPIO_Pin_11);
 597              		.loc 1 258 0
 598 03b6 4FF00000 		mov	r0, #0
 599 03ba C4F20200 		movt	r0, 16386
 600 03be 4FF40061 		mov	r1, #2048
 601 03c2 FFF7FEFF 		bl	GPIO_ResetBits
 259:../selftest.c ****   
 260:../selftest.c ****   /* Waiting delay 10ms */
 261:../selftest.c ****   Delay(1);
 602              		.loc 1 261 0
 603 03c6 4FF00100 		mov	r0, #1
 604 03ca FFF7FEFF 		bl	Delay
 262:../selftest.c ****   
 263:../selftest.c ****   /* Check PA12 level without cable connected */
 264:../selftest.c ****   if (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_12) == Bit_RESET)
 605              		.loc 1 264 0
 606 03ce 4FF00000 		mov	r0, #0
 607 03d2 C4F20200 		movt	r0, 16386
 608 03d6 4FF48051 		mov	r1, #4096
 609 03da FFF7FEFF 		bl	GPIO_ReadInputDataBit
 610 03de 0346     		mov	r3, r0
 611 03e0 002B     		cmp	r3, #0
 612 03e2 01D1     		bne	.L16
 265:../selftest.c ****   {
 266:../selftest.c ****     Fail_Handler();
 613              		.loc 1 266 0
 614 03e4 FFF7FEFF 		bl	Fail_Handler
 615              	.L16:
 267:../selftest.c ****   }
 268:../selftest.c ****   
 269:../selftest.c ****   /* GPIOA Configuration: Pins 11 in input pull-up */
 270:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
 616              		.loc 1 270 0
 617 03e8 4FF40063 		mov	r3, #2048
 618 03ec 3B60     		str	r3, [r7, #0]
 271:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 619              		.loc 1 271 0
 620 03ee 4FF00003 		mov	r3, #0
 621 03f2 3B71     		strb	r3, [r7, #4]
 272:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 622              		.loc 1 272 0
 623 03f4 4FF00003 		mov	r3, #0
 624 03f8 BB71     		strb	r3, [r7, #6]
 273:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 625              		.loc 1 273 0
 626 03fa 4FF00103 		mov	r3, #1
 627 03fe FB71     		strb	r3, [r7, #7]
 274:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 628              		.loc 1 274 0
 629 0400 4FF00203 		mov	r3, #2
 630 0404 7B71     		strb	r3, [r7, #5]
 275:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 631              		.loc 1 275 0
 632 0406 4FF00000 		mov	r0, #0
 633 040a C4F20200 		movt	r0, 16386
 634 040e 3B46     		mov	r3, r7
 635 0410 1946     		mov	r1, r3
 636 0412 FFF7FEFF 		bl	GPIO_Init
 276:../selftest.c ****   
 277:../selftest.c ****   /* GPIOA Configuration: Pin 12 in output push-pull */
 278:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;
 637              		.loc 1 278 0
 638 0416 4FF48053 		mov	r3, #4096
 639 041a 3B60     		str	r3, [r7, #0]
 279:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 640              		.loc 1 279 0
 641 041c 4FF00103 		mov	r3, #1
 642 0420 3B71     		strb	r3, [r7, #4]
 280:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 643              		.loc 1 280 0
 644 0422 4FF00003 		mov	r3, #0
 645 0426 BB71     		strb	r3, [r7, #6]
 281:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 646              		.loc 1 281 0
 647 0428 4FF00103 		mov	r3, #1
 648 042c FB71     		strb	r3, [r7, #7]
 282:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 649              		.loc 1 282 0
 650 042e 4FF00203 		mov	r3, #2
 651 0432 7B71     		strb	r3, [r7, #5]
 283:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 652              		.loc 1 283 0
 653 0434 4FF00000 		mov	r0, #0
 654 0438 C4F20200 		movt	r0, 16386
 655 043c 3B46     		mov	r3, r7
 656 043e 1946     		mov	r1, r3
 657 0440 FFF7FEFF 		bl	GPIO_Init
 284:../selftest.c ****   GPIO_ResetBits(GPIOA, GPIO_Pin_12);
 658              		.loc 1 284 0
 659 0444 4FF00000 		mov	r0, #0
 660 0448 C4F20200 		movt	r0, 16386
 661 044c 4FF48051 		mov	r1, #4096
 662 0450 FFF7FEFF 		bl	GPIO_ResetBits
 285:../selftest.c ****   
 286:../selftest.c ****   /* Waiting delay 10ms */
 287:../selftest.c ****   Delay(1);
 663              		.loc 1 287 0
 664 0454 4FF00100 		mov	r0, #1
 665 0458 FFF7FEFF 		bl	Delay
 288:../selftest.c ****   
 289:../selftest.c ****   /* Check PA12 level without cable connected */
 290:../selftest.c ****   if (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET)
 666              		.loc 1 290 0
 667 045c 4FF00000 		mov	r0, #0
 668 0460 C4F20200 		movt	r0, 16386
 669 0464 4FF40061 		mov	r1, #2048
 670 0468 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 671 046c 0346     		mov	r3, r0
 672 046e 002B     		cmp	r3, #0
 673 0470 01D1     		bne	.L17
 291:../selftest.c ****   {
 292:../selftest.c ****     Fail_Handler();
 674              		.loc 1 292 0
 675 0472 FFF7FEFF 		bl	Fail_Handler
 676              	.L17:
 293:../selftest.c ****   }
 294:../selftest.c ****   
 295:../selftest.c ****   /* GPIOA Configuration: Pins 9 in output push-pull */
 296:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 677              		.loc 1 296 0
 678 0476 4FF40073 		mov	r3, #512
 679 047a 3B60     		str	r3, [r7, #0]
 297:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 680              		.loc 1 297 0
 681 047c 4FF00103 		mov	r3, #1
 682 0480 3B71     		strb	r3, [r7, #4]
 298:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 683              		.loc 1 298 0
 684 0482 4FF00003 		mov	r3, #0
 685 0486 BB71     		strb	r3, [r7, #6]
 299:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 686              		.loc 1 299 0
 687 0488 4FF00003 		mov	r3, #0
 688 048c FB71     		strb	r3, [r7, #7]
 300:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 689              		.loc 1 300 0
 690 048e 4FF00203 		mov	r3, #2
 691 0492 7B71     		strb	r3, [r7, #5]
 301:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 692              		.loc 1 301 0
 693 0494 4FF00000 		mov	r0, #0
 694 0498 C4F20200 		movt	r0, 16386
 695 049c 3B46     		mov	r3, r7
 696 049e 1946     		mov	r1, r3
 697 04a0 FFF7FEFF 		bl	GPIO_Init
 302:../selftest.c ****   
 303:../selftest.c ****   /* Turn LED7 ON using PA9 */
 304:../selftest.c ****   GPIO_SetBits(GPIOA, GPIO_Pin_9);
 698              		.loc 1 304 0
 699 04a4 4FF00000 		mov	r0, #0
 700 04a8 C4F20200 		movt	r0, 16386
 701 04ac 4FF40071 		mov	r1, #512
 702 04b0 FFF7FEFF 		bl	GPIO_SetBits
 305:../selftest.c ****   
 306:../selftest.c ****   /* Turn Green LED ON: signaling Audio USB Test part1 PASS */
 307:../selftest.c ****   STM_EVAL_LEDOn(LED4);
 703              		.loc 1 307 0
 704 04b4 4FF00000 		mov	r0, #0
 705 04b8 FFF7FEFF 		bl	STM_EVAL_LEDOn
 308:../selftest.c ****   
 309:../selftest.c ****   /* Waiting User Button is pressed */
 310:../selftest.c ****   while (STM_EVAL_PBGetState(BUTTON_USER) == Bit_RESET)
 706              		.loc 1 310 0
 707 04bc 00BF     		nop
 708              	.L18:
 709              		.loc 1 310 0 is_stmt 0 discriminator 1
 710 04be 4FF00000 		mov	r0, #0
 711 04c2 FFF7FEFF 		bl	STM_EVAL_PBGetState
 712 04c6 0346     		mov	r3, r0
 713 04c8 002B     		cmp	r3, #0
 714 04ca F8D0     		beq	.L18
 311:../selftest.c ****   {}
 312:../selftest.c ****   
 313:../selftest.c ****   /* Waiting User Button is Released */
 314:../selftest.c ****   while (STM_EVAL_PBGetState(BUTTON_USER) != Bit_RESET)
 715              		.loc 1 314 0 is_stmt 1
 716 04cc 00BF     		nop
 717              	.L19:
 718              		.loc 1 314 0 is_stmt 0 discriminator 1
 719 04ce 4FF00000 		mov	r0, #0
 720 04d2 FFF7FEFF 		bl	STM_EVAL_PBGetState
 721 04d6 0346     		mov	r3, r0
 722 04d8 002B     		cmp	r3, #0
 723 04da F8D1     		bne	.L19
 315:../selftest.c ****   {}
 316:../selftest.c ****   
 317:../selftest.c ****   /* Turn Green LED OFF: signaling the end of Audio USB Test part1 and switching to 
 318:../selftest.c ****   the part2 */
 319:../selftest.c ****   STM_EVAL_LEDOff(LED4);
 724              		.loc 1 319 0 is_stmt 1
 725 04dc 4FF00000 		mov	r0, #0
 726 04e0 FFF7FEFF 		bl	STM_EVAL_LEDOff
 320:../selftest.c ****   
 321:../selftest.c ****   /* Turn LED7 OFF using PA9 */
 322:../selftest.c ****   GPIO_ResetBits(GPIOA, GPIO_Pin_9);
 727              		.loc 1 322 0
 728 04e4 4FF00000 		mov	r0, #0
 729 04e8 C4F20200 		movt	r0, 16386
 730 04ec 4FF40071 		mov	r1, #512
 731 04f0 FFF7FEFF 		bl	GPIO_ResetBits
 323:../selftest.c ****   
 324:../selftest.c ****   /* Turn LED8 OFF using PD5 */
 325:../selftest.c ****   GPIO_SetBits(GPIOD, GPIO_Pin_5);
 732              		.loc 1 325 0
 733 04f4 4FF44060 		mov	r0, #3072
 734 04f8 C4F20200 		movt	r0, 16386
 735 04fc 4FF02001 		mov	r1, #32
 736 0500 FFF7FEFF 		bl	GPIO_SetBits
 326:../selftest.c ****   
 327:../selftest.c ****   /*--------------- Part2: with Audio USB cables connected  ------------------*/ 
 328:../selftest.c ****   
 329:../selftest.c ****   /*********************************** USB Test *******************************/
 330:../selftest.c ****   /* Check the ID level with cable connected */
 331:../selftest.c ****   if (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_10) != Bit_RESET)
 737              		.loc 1 331 0
 738 0504 4FF00000 		mov	r0, #0
 739 0508 C4F20200 		movt	r0, 16386
 740 050c 4FF48061 		mov	r1, #1024
 741 0510 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 742 0514 0346     		mov	r3, r0
 743 0516 002B     		cmp	r3, #0
 744 0518 01D0     		beq	.L20
 332:../selftest.c ****   {
 333:../selftest.c ****     Fail_Handler();
 745              		.loc 1 333 0
 746 051a FFF7FEFF 		bl	Fail_Handler
 747              	.L20:
 334:../selftest.c ****   }
 335:../selftest.c ****   
 336:../selftest.c ****   /* GPIOA Configuration: Pins 11, 12 in input pull-down */
 337:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11 | GPIO_Pin_12;
 748              		.loc 1 337 0
 749 051e 4FF4C053 		mov	r3, #6144
 750 0522 3B60     		str	r3, [r7, #0]
 338:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 751              		.loc 1 338 0
 752 0524 4FF00003 		mov	r3, #0
 753 0528 3B71     		strb	r3, [r7, #4]
 339:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 754              		.loc 1 339 0
 755 052a 4FF00003 		mov	r3, #0
 756 052e BB71     		strb	r3, [r7, #6]
 340:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;
 757              		.loc 1 340 0
 758 0530 4FF00203 		mov	r3, #2
 759 0534 FB71     		strb	r3, [r7, #7]
 341:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 760              		.loc 1 341 0
 761 0536 4FF00203 		mov	r3, #2
 762 053a 7B71     		strb	r3, [r7, #5]
 342:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 763              		.loc 1 342 0
 764 053c 4FF00000 		mov	r0, #0
 765 0540 C4F20200 		movt	r0, 16386
 766 0544 3B46     		mov	r3, r7
 767 0546 1946     		mov	r1, r3
 768 0548 FFF7FEFF 		bl	GPIO_Init
 343:../selftest.c ****   
 344:../selftest.c ****   /* GPIOA Configuration: Pin 9 in output push-pull */
 345:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 769              		.loc 1 345 0
 770 054c 4FF40073 		mov	r3, #512
 771 0550 3B60     		str	r3, [r7, #0]
 346:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 772              		.loc 1 346 0
 773 0552 4FF00103 		mov	r3, #1
 774 0556 3B71     		strb	r3, [r7, #4]
 347:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 775              		.loc 1 347 0
 776 0558 4FF00003 		mov	r3, #0
 777 055c BB71     		strb	r3, [r7, #6]
 348:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 778              		.loc 1 348 0
 779 055e 4FF00103 		mov	r3, #1
 780 0562 FB71     		strb	r3, [r7, #7]
 349:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 781              		.loc 1 349 0
 782 0564 4FF00203 		mov	r3, #2
 783 0568 7B71     		strb	r3, [r7, #5]
 350:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 784              		.loc 1 350 0
 785 056a 4FF00000 		mov	r0, #0
 786 056e C4F20200 		movt	r0, 16386
 787 0572 3B46     		mov	r3, r7
 788 0574 1946     		mov	r1, r3
 789 0576 FFF7FEFF 		bl	GPIO_Init
 351:../selftest.c ****   GPIO_SetBits(GPIOA, GPIO_Pin_9);
 790              		.loc 1 351 0
 791 057a 4FF00000 		mov	r0, #0
 792 057e C4F20200 		movt	r0, 16386
 793 0582 4FF40071 		mov	r1, #512
 794 0586 FFF7FEFF 		bl	GPIO_SetBits
 352:../selftest.c ****   
 353:../selftest.c ****   /* Waiting delay 10ms */
 354:../selftest.c ****   Delay(1);
 795              		.loc 1 354 0
 796 058a 4FF00100 		mov	r0, #1
 797 058e FFF7FEFF 		bl	Delay
 355:../selftest.c ****   
 356:../selftest.c ****   /* Check PA11 and PA12 level with cable connected */
 357:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET) || \
 798              		.loc 1 357 0
 799 0592 4FF00000 		mov	r0, #0
 800 0596 C4F20200 		movt	r0, 16386
 801 059a 4FF40061 		mov	r1, #2048
 802 059e FFF7FEFF 		bl	GPIO_ReadInputDataBit
 803 05a2 0346     		mov	r3, r0
 804 05a4 002B     		cmp	r3, #0
 805 05a6 0AD0     		beq	.L21
 358:../selftest.c ****       (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_12) == Bit_RESET))
 806              		.loc 1 358 0 discriminator 1
 807 05a8 4FF00000 		mov	r0, #0
 808 05ac C4F20200 		movt	r0, 16386
 809 05b0 4FF48051 		mov	r1, #4096
 810 05b4 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 811 05b8 0346     		mov	r3, r0
 357:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET) || \
 812              		.loc 1 357 0 discriminator 1
 813 05ba 002B     		cmp	r3, #0
 814 05bc 01D1     		bne	.L22
 815              	.L21:
 359:../selftest.c ****   {
 360:../selftest.c ****     Fail_Handler();
 816              		.loc 1 360 0
 817 05be FFF7FEFF 		bl	Fail_Handler
 818              	.L22:
 361:../selftest.c ****   }
 362:../selftest.c ****   
 363:../selftest.c ****   /* GPIOA Configuration: Pins 9, 12 in input pull-down */
 364:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_12;
 819              		.loc 1 364 0
 820 05c2 4FF49053 		mov	r3, #4608
 821 05c6 3B60     		str	r3, [r7, #0]
 365:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 822              		.loc 1 365 0
 823 05c8 4FF00003 		mov	r3, #0
 824 05cc 3B71     		strb	r3, [r7, #4]
 366:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 825              		.loc 1 366 0
 826 05ce 4FF00003 		mov	r3, #0
 827 05d2 BB71     		strb	r3, [r7, #6]
 367:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;
 828              		.loc 1 367 0
 829 05d4 4FF00203 		mov	r3, #2
 830 05d8 FB71     		strb	r3, [r7, #7]
 368:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 831              		.loc 1 368 0
 832 05da 4FF00203 		mov	r3, #2
 833 05de 7B71     		strb	r3, [r7, #5]
 369:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 834              		.loc 1 369 0
 835 05e0 4FF00000 		mov	r0, #0
 836 05e4 C4F20200 		movt	r0, 16386
 837 05e8 3B46     		mov	r3, r7
 838 05ea 1946     		mov	r1, r3
 839 05ec FFF7FEFF 		bl	GPIO_Init
 370:../selftest.c ****   
 371:../selftest.c ****   /* GPIOA Configuration: Pin 11 in output push-pull */
 372:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
 840              		.loc 1 372 0
 841 05f0 4FF40063 		mov	r3, #2048
 842 05f4 3B60     		str	r3, [r7, #0]
 373:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 843              		.loc 1 373 0
 844 05f6 4FF00103 		mov	r3, #1
 845 05fa 3B71     		strb	r3, [r7, #4]
 374:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 846              		.loc 1 374 0
 847 05fc 4FF00003 		mov	r3, #0
 848 0600 BB71     		strb	r3, [r7, #6]
 375:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 849              		.loc 1 375 0
 850 0602 4FF00103 		mov	r3, #1
 851 0606 FB71     		strb	r3, [r7, #7]
 376:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 852              		.loc 1 376 0
 853 0608 4FF00203 		mov	r3, #2
 854 060c 7B71     		strb	r3, [r7, #5]
 377:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 855              		.loc 1 377 0
 856 060e 4FF00000 		mov	r0, #0
 857 0612 C4F20200 		movt	r0, 16386
 858 0616 3B46     		mov	r3, r7
 859 0618 1946     		mov	r1, r3
 860 061a FFF7FEFF 		bl	GPIO_Init
 378:../selftest.c ****   GPIO_SetBits(GPIOA, GPIO_Pin_11);
 861              		.loc 1 378 0
 862 061e 4FF00000 		mov	r0, #0
 863 0622 C4F20200 		movt	r0, 16386
 864 0626 4FF40061 		mov	r1, #2048
 865 062a FFF7FEFF 		bl	GPIO_SetBits
 379:../selftest.c ****   
 380:../selftest.c ****   /* Waiting delay 10ms */
 381:../selftest.c ****   Delay(1);
 866              		.loc 1 381 0
 867 062e 4FF00100 		mov	r0, #1
 868 0632 FFF7FEFF 		bl	Delay
 382:../selftest.c ****   
 383:../selftest.c ****   /* Check PA9 and PA12 level with cable connected */
 384:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_9) == Bit_RESET)|| \
 869              		.loc 1 384 0
 870 0636 4FF00000 		mov	r0, #0
 871 063a C4F20200 		movt	r0, 16386
 872 063e 4FF40071 		mov	r1, #512
 873 0642 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 874 0646 0346     		mov	r3, r0
 875 0648 002B     		cmp	r3, #0
 876 064a 0AD0     		beq	.L23
 385:../selftest.c ****       (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_12) == Bit_RESET))
 877              		.loc 1 385 0 discriminator 1
 878 064c 4FF00000 		mov	r0, #0
 879 0650 C4F20200 		movt	r0, 16386
 880 0654 4FF48051 		mov	r1, #4096
 881 0658 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 882 065c 0346     		mov	r3, r0
 384:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_9) == Bit_RESET)|| \
 883              		.loc 1 384 0 discriminator 1
 884 065e 002B     		cmp	r3, #0
 885 0660 01D1     		bne	.L24
 886              	.L23:
 386:../selftest.c ****   {
 387:../selftest.c ****     Fail_Handler();
 887              		.loc 1 387 0
 888 0662 FFF7FEFF 		bl	Fail_Handler
 889              	.L24:
 388:../selftest.c ****   }
 389:../selftest.c ****   
 390:../selftest.c ****   /* GPIOA Configuration: Pins 9, 11 in input pull-down */
 391:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_11;
 890              		.loc 1 391 0
 891 0666 4FF42063 		mov	r3, #2560
 892 066a 3B60     		str	r3, [r7, #0]
 392:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 893              		.loc 1 392 0
 894 066c 4FF00003 		mov	r3, #0
 895 0670 3B71     		strb	r3, [r7, #4]
 393:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 896              		.loc 1 393 0
 897 0672 4FF00003 		mov	r3, #0
 898 0676 BB71     		strb	r3, [r7, #6]
 394:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;
 899              		.loc 1 394 0
 900 0678 4FF00203 		mov	r3, #2
 901 067c FB71     		strb	r3, [r7, #7]
 395:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 902              		.loc 1 395 0
 903 067e 4FF00203 		mov	r3, #2
 904 0682 7B71     		strb	r3, [r7, #5]
 396:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 905              		.loc 1 396 0
 906 0684 4FF00000 		mov	r0, #0
 907 0688 C4F20200 		movt	r0, 16386
 908 068c 3B46     		mov	r3, r7
 909 068e 1946     		mov	r1, r3
 910 0690 FFF7FEFF 		bl	GPIO_Init
 397:../selftest.c ****   
 398:../selftest.c ****   /* GPIOA Configuration: Pin 12 in output push-pull */
 399:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;
 911              		.loc 1 399 0
 912 0694 4FF48053 		mov	r3, #4096
 913 0698 3B60     		str	r3, [r7, #0]
 400:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 914              		.loc 1 400 0
 915 069a 4FF00103 		mov	r3, #1
 916 069e 3B71     		strb	r3, [r7, #4]
 401:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 917              		.loc 1 401 0
 918 06a0 4FF00003 		mov	r3, #0
 919 06a4 BB71     		strb	r3, [r7, #6]
 402:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 920              		.loc 1 402 0
 921 06a6 4FF00103 		mov	r3, #1
 922 06aa FB71     		strb	r3, [r7, #7]
 403:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 923              		.loc 1 403 0
 924 06ac 4FF00203 		mov	r3, #2
 925 06b0 7B71     		strb	r3, [r7, #5]
 404:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 926              		.loc 1 404 0
 927 06b2 4FF00000 		mov	r0, #0
 928 06b6 C4F20200 		movt	r0, 16386
 929 06ba 3B46     		mov	r3, r7
 930 06bc 1946     		mov	r1, r3
 931 06be FFF7FEFF 		bl	GPIO_Init
 405:../selftest.c ****   GPIO_SetBits(GPIOA, GPIO_Pin_12);
 932              		.loc 1 405 0
 933 06c2 4FF00000 		mov	r0, #0
 934 06c6 C4F20200 		movt	r0, 16386
 935 06ca 4FF48051 		mov	r1, #4096
 936 06ce FFF7FEFF 		bl	GPIO_SetBits
 406:../selftest.c ****   
 407:../selftest.c ****   /* Waiting delay 10ms */
 408:../selftest.c ****   Delay(1);
 937              		.loc 1 408 0
 938 06d2 4FF00100 		mov	r0, #1
 939 06d6 FFF7FEFF 		bl	Delay
 409:../selftest.c ****   
 410:../selftest.c ****   /* Check PA9 and PA12 level with cable connected */
 411:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_9) == Bit_RESET)|| \
 940              		.loc 1 411 0
 941 06da 4FF00000 		mov	r0, #0
 942 06de C4F20200 		movt	r0, 16386
 943 06e2 4FF40071 		mov	r1, #512
 944 06e6 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 945 06ea 0346     		mov	r3, r0
 946 06ec 002B     		cmp	r3, #0
 947 06ee 0AD0     		beq	.L25
 412:../selftest.c ****       (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_11) == Bit_RESET))
 948              		.loc 1 412 0 discriminator 1
 949 06f0 4FF00000 		mov	r0, #0
 950 06f4 C4F20200 		movt	r0, 16386
 951 06f8 4FF40061 		mov	r1, #2048
 952 06fc FFF7FEFF 		bl	GPIO_ReadInputDataBit
 953 0700 0346     		mov	r3, r0
 411:../selftest.c ****   if ((GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_9) == Bit_RESET)|| \
 954              		.loc 1 411 0 discriminator 1
 955 0702 002B     		cmp	r3, #0
 956 0704 01D1     		bne	.L26
 957              	.L25:
 413:../selftest.c ****   {
 414:../selftest.c ****     Fail_Handler();
 958              		.loc 1 414 0
 959 0706 FFF7FEFF 		bl	Fail_Handler
 960              	.L26:
 415:../selftest.c ****   }
 416:../selftest.c **** 
 417:../selftest.c ****   /* GPIOA Configuration: Pins 11, 12 in input pull-down */
 418:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11 | GPIO_Pin_12;
 961              		.loc 1 418 0
 962 070a 4FF4C053 		mov	r3, #6144
 963 070e 3B60     		str	r3, [r7, #0]
 419:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 964              		.loc 1 419 0
 965 0710 4FF00003 		mov	r3, #0
 966 0714 3B71     		strb	r3, [r7, #4]
 420:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 967              		.loc 1 420 0
 968 0716 4FF00003 		mov	r3, #0
 969 071a BB71     		strb	r3, [r7, #6]
 421:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_DOWN;
 970              		.loc 1 421 0
 971 071c 4FF00203 		mov	r3, #2
 972 0720 FB71     		strb	r3, [r7, #7]
 422:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 973              		.loc 1 422 0
 974 0722 4FF00203 		mov	r3, #2
 975 0726 7B71     		strb	r3, [r7, #5]
 423:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 976              		.loc 1 423 0
 977 0728 4FF00000 		mov	r0, #0
 978 072c C4F20200 		movt	r0, 16386
 979 0730 3B46     		mov	r3, r7
 980 0732 1946     		mov	r1, r3
 981 0734 FFF7FEFF 		bl	GPIO_Init
 424:../selftest.c ****   
 425:../selftest.c ****   /* GPIOA Configuration: Pin 9 in output push-pull */
 426:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 982              		.loc 1 426 0
 983 0738 4FF40073 		mov	r3, #512
 984 073c 3B60     		str	r3, [r7, #0]
 427:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
 985              		.loc 1 427 0
 986 073e 4FF00103 		mov	r3, #1
 987 0742 3B71     		strb	r3, [r7, #4]
 428:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 988              		.loc 1 428 0
 989 0744 4FF00003 		mov	r3, #0
 990 0748 BB71     		strb	r3, [r7, #6]
 429:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 991              		.loc 1 429 0
 992 074a 4FF00103 		mov	r3, #1
 993 074e FB71     		strb	r3, [r7, #7]
 430:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 994              		.loc 1 430 0
 995 0750 4FF00203 		mov	r3, #2
 996 0754 7B71     		strb	r3, [r7, #5]
 431:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 997              		.loc 1 431 0
 998 0756 4FF00000 		mov	r0, #0
 999 075a C4F20200 		movt	r0, 16386
 1000 075e 3B46     		mov	r3, r7
 1001 0760 1946     		mov	r1, r3
 1002 0762 FFF7FEFF 		bl	GPIO_Init
 432:../selftest.c ****   
 433:../selftest.c ****   /* Turn LED7 OFF using PA9 */
 434:../selftest.c ****   GPIO_ResetBits(GPIOA, GPIO_Pin_9);
 1003              		.loc 1 434 0
 1004 0766 4FF00000 		mov	r0, #0
 1005 076a C4F20200 		movt	r0, 16386
 1006 076e 4FF40071 		mov	r1, #512
 1007 0772 FFF7FEFF 		bl	GPIO_ResetBits
 435:../selftest.c **** }
 1008              		.loc 1 435 0
 1009 0776 07F10807 		add	r7, r7, #8
 1010 077a BD46     		mov	sp, r7
 1011 077c 80BD     		pop	{r7, pc}
 1012              		.cfi_endproc
 1013              	.LFE111:
 1015 077e 00BF     		.align	2
 1016              		.global	Audio_Test
 1017              		.thumb
 1018              		.thumb_func
 1020              	Audio_Test:
 1021              	.LFB112:
 436:../selftest.c **** 
 437:../selftest.c **** /**
 438:../selftest.c ****   * @brief Test Audio Hardware.
 439:../selftest.c ****   *   The main objectif of this test is to check the hardware connection of the 
 440:../selftest.c ****   *   Audio peripheral.
 441:../selftest.c ****   * @param  None
 442:../selftest.c ****   * @retval None
 443:../selftest.c ****   */
 444:../selftest.c **** void Audio_Test(void)
 445:../selftest.c **** { 
 1022              		.loc 1 445 0
 1023              		.cfi_startproc
 1024              		@ args = 0, pretend = 0, frame = 16
 1025              		@ frame_needed = 1, uses_anonymous_args = 0
 1026 0780 80B5     		push	{r7, lr}
 1027              	.LCFI6:
 1028              		.cfi_def_cfa_offset 8
 1029              		.cfi_offset 14, -4
 1030              		.cfi_offset 7, -8
 1031 0782 84B0     		sub	sp, sp, #16
 1032              	.LCFI7:
 1033              		.cfi_def_cfa_offset 24
 1034 0784 00AF     		add	r7, sp, #0
 1035              	.LCFI8:
 1036              		.cfi_def_cfa_register 7
 446:../selftest.c ****   GPIO_InitTypeDef  GPIO_InitStructure;  
 447:../selftest.c ****   uint8_t audioteststatus = 0x00;
 1037              		.loc 1 447 0
 1038 0786 4FF00003 		mov	r3, #0
 1039 078a FB73     		strb	r3, [r7, #15]
 448:../selftest.c **** 
 449:../selftest.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC1, ENABLE);
 1040              		.loc 1 449 0
 1041 078c 4FF48070 		mov	r0, #256
 1042 0790 4FF00101 		mov	r1, #1
 1043 0794 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 450:../selftest.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC2, ENABLE);
 1044              		.loc 1 450 0
 1045 0798 4FF40070 		mov	r0, #512
 1046 079c 4FF00101 		mov	r1, #1
 1047 07a0 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 451:../selftest.c ****   
 452:../selftest.c ****   /* Set the current audio interface: I2S or DAC */
 453:../selftest.c ****   EVAL_AUDIO_SetAudioInterface(AUDIO_INTERFACE_I2S);
 1048              		.loc 1 453 0
 1049 07a4 4FF00100 		mov	r0, #1
 1050 07a8 FFF7FEFF 		bl	EVAL_AUDIO_SetAudioInterface
 454:../selftest.c ****   
 455:../selftest.c ****   /* Initialize the Audio codec and all related peripherals (I2S, I2C, IOs...) */  
 456:../selftest.c ****   if (EVAL_AUDIO_Init(OUTPUT_DEVICE_HEADPHONE, 87, I2S_AudioFreq_48k) !=0)
 1051              		.loc 1 456 0
 1052 07ac 4FF00200 		mov	r0, #2
 1053 07b0 4FF05701 		mov	r1, #87
 1054 07b4 4BF68032 		movw	r2, #48000
 1055 07b8 FFF7FEFF 		bl	EVAL_AUDIO_Init
 1056 07bc 0346     		mov	r3, r0
 1057 07be 002B     		cmp	r3, #0
 1058 07c0 01D0     		beq	.L28
 457:../selftest.c ****   {
 458:../selftest.c ****     Fail_Handler();
 1059              		.loc 1 458 0
 1060 07c2 FFF7FEFF 		bl	Fail_Handler
 1061              	.L28:
 459:../selftest.c ****   }
 460:../selftest.c ****   /* I2S code to be exectued under the I2S interrupt */
 461:../selftest.c ****   DACTest = 0;
 1062              		.loc 1 461 0
 1063 07c6 40F20003 		movw	r3, #:lower16:DACTest
 1064 07ca C0F20003 		movt	r3, #:upper16:DACTest
 1065 07ce 4FF00002 		mov	r2, #0
 1066 07d2 1A70     		strb	r2, [r3, #0]
 462:../selftest.c ****   
 463:../selftest.c ****   /* ADC Common Init */
 464:../selftest.c ****   ADC_CommonInitStructure.ADC_Mode = ADC_Mode_Independent;
 1067              		.loc 1 464 0
 1068 07d4 40F20003 		movw	r3, #:lower16:ADC_CommonInitStructure
 1069 07d8 C0F20003 		movt	r3, #:upper16:ADC_CommonInitStructure
 1070 07dc 4FF00002 		mov	r2, #0
 1071 07e0 1A60     		str	r2, [r3, #0]
 465:../selftest.c ****   ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div8;
 1072              		.loc 1 465 0
 1073 07e2 40F20003 		movw	r3, #:lower16:ADC_CommonInitStructure
 1074 07e6 C0F20003 		movt	r3, #:upper16:ADC_CommonInitStructure
 1075 07ea 4FF44032 		mov	r2, #196608
 1076 07ee 5A60     		str	r2, [r3, #4]
 466:../selftest.c ****   ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;
 1077              		.loc 1 466 0
 1078 07f0 40F20003 		movw	r3, #:lower16:ADC_CommonInitStructure
 1079 07f4 C0F20003 		movt	r3, #:upper16:ADC_CommonInitStructure
 1080 07f8 4FF00002 		mov	r2, #0
 1081 07fc 9A60     		str	r2, [r3, #8]
 467:../selftest.c ****   ADC_CommonInitStructure.ADC_TwoSamplingDelay = ADC_TwoSamplingDelay_20Cycles; 
 1082              		.loc 1 467 0
 1083 07fe 40F20003 		movw	r3, #:lower16:ADC_CommonInitStructure
 1084 0802 C0F20003 		movt	r3, #:upper16:ADC_CommonInitStructure
 1085 0806 4FF47062 		mov	r2, #3840
 1086 080a DA60     		str	r2, [r3, #12]
 468:../selftest.c ****   ADC_CommonInit(&ADC_CommonInitStructure);
 1087              		.loc 1 468 0
 1088 080c 40F20000 		movw	r0, #:lower16:ADC_CommonInitStructure
 1089 0810 C0F20000 		movt	r0, #:upper16:ADC_CommonInitStructure
 1090 0814 FFF7FEFF 		bl	ADC_CommonInit
 469:../selftest.c ****   
 470:../selftest.c ****   /* ADC peripherals Init */
 471:../selftest.c ****   ADC_StructInit(&ADC_InitStructure);
 1091              		.loc 1 471 0
 1092 0818 40F20000 		movw	r0, #:lower16:ADC_InitStructure
 1093 081c C0F20000 		movt	r0, #:upper16:ADC_InitStructure
 1094 0820 FFF7FEFF 		bl	ADC_StructInit
 472:../selftest.c ****   ADC_InitStructure.ADC_Resolution = ADC_Resolution_8b;
 1095              		.loc 1 472 0
 1096 0824 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1097 0828 C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1098 082c 4FF00072 		mov	r2, #33554432
 1099 0830 1A60     		str	r2, [r3, #0]
 473:../selftest.c ****   ADC_InitStructure.ADC_ScanConvMode = DISABLE;
 1100              		.loc 1 473 0
 1101 0832 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1102 0836 C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1103 083a 4FF00002 		mov	r2, #0
 1104 083e 1A71     		strb	r2, [r3, #4]
 474:../selftest.c ****   ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;
 1105              		.loc 1 474 0
 1106 0840 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1107 0844 C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1108 0848 4FF00002 		mov	r2, #0
 1109 084c 5A71     		strb	r2, [r3, #5]
 475:../selftest.c ****   ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;
 1110              		.loc 1 475 0
 1111 084e 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1112 0852 C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1113 0856 4FF00002 		mov	r2, #0
 1114 085a 9A60     		str	r2, [r3, #8]
 476:../selftest.c ****   ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
 1115              		.loc 1 476 0
 1116 085c 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1117 0860 C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1118 0864 4FF00002 		mov	r2, #0
 1119 0868 1A61     		str	r2, [r3, #16]
 477:../selftest.c ****   ADC_InitStructure.ADC_NbrOfConversion = 1;
 1120              		.loc 1 477 0
 1121 086a 40F20003 		movw	r3, #:lower16:ADC_InitStructure
 1122 086e C0F20003 		movt	r3, #:upper16:ADC_InitStructure
 1123 0872 4FF00102 		mov	r2, #1
 1124 0876 1A75     		strb	r2, [r3, #20]
 478:../selftest.c ****   ADC_Init(ADC1, &ADC_InitStructure);
 1125              		.loc 1 478 0
 1126 0878 4FF40050 		mov	r0, #8192
 1127 087c C4F20100 		movt	r0, 16385
 1128 0880 40F20001 		movw	r1, #:lower16:ADC_InitStructure
 1129 0884 C0F20001 		movt	r1, #:upper16:ADC_InitStructure
 1130 0888 FFF7FEFF 		bl	ADC_Init
 479:../selftest.c **** 
 480:../selftest.c ****   ADC_Init(ADC2, &ADC_InitStructure);
 1131              		.loc 1 480 0
 1132 088c 4FF40450 		mov	r0, #8448
 1133 0890 C4F20100 		movt	r0, 16385
 1134 0894 40F20001 		movw	r1, #:lower16:ADC_InitStructure
 1135 0898 C0F20001 		movt	r1, #:upper16:ADC_InitStructure
 1136 089c FFF7FEFF 		bl	ADC_Init
 481:../selftest.c ****   
 482:../selftest.c ****   /* Configure ADC Channels pin as analog input */
 483:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 1137              		.loc 1 483 0
 1138 08a0 4FF00403 		mov	r3, #4
 1139 08a4 7B60     		str	r3, [r7, #4]
 484:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 1140              		.loc 1 484 0
 1141 08a6 4FF00203 		mov	r3, #2
 1142 08aa 7B72     		strb	r3, [r7, #9]
 485:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AN;
 1143              		.loc 1 485 0
 1144 08ac 4FF00303 		mov	r3, #3
 1145 08b0 3B72     		strb	r3, [r7, #8]
 486:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;
 1146              		.loc 1 486 0
 1147 08b2 4FF00003 		mov	r3, #0
 1148 08b6 FB72     		strb	r3, [r7, #11]
 487:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 1149              		.loc 1 487 0
 1150 08b8 4FF00000 		mov	r0, #0
 1151 08bc C4F20200 		movt	r0, 16386
 1152 08c0 07F10403 		add	r3, r7, #4
 1153 08c4 1946     		mov	r1, r3
 1154 08c6 FFF7FEFF 		bl	GPIO_Init
 488:../selftest.c ****   
 489:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3 ;
 1155              		.loc 1 489 0
 1156 08ca 4FF00803 		mov	r3, #8
 1157 08ce 7B60     		str	r3, [r7, #4]
 490:../selftest.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
 1158              		.loc 1 490 0
 1159 08d0 4FF00000 		mov	r0, #0
 1160 08d4 C4F20200 		movt	r0, 16386
 1161 08d8 07F10403 		add	r3, r7, #4
 1162 08dc 1946     		mov	r1, r3
 1163 08de FFF7FEFF 		bl	GPIO_Init
 491:../selftest.c ****   
 492:../selftest.c ****   counter1 = 0;
 1164              		.loc 1 492 0
 1165 08e2 40F20003 		movw	r3, #:lower16:counter1
 1166 08e6 C0F20003 		movt	r3, #:upper16:counter1
 1167 08ea 4FF00002 		mov	r2, #0
 1168 08ee 1A80     		strh	r2, [r3, #0]	@ movhi
 493:../selftest.c ****   counter0 = 0;
 1169              		.loc 1 493 0
 1170 08f0 40F20003 		movw	r3, #:lower16:counter0
 1171 08f4 C0F20003 		movt	r3, #:upper16:counter0
 1172 08f8 4FF00002 		mov	r2, #0
 1173 08fc 1A80     		strh	r2, [r3, #0]	@ movhi
 494:../selftest.c ****   audioteststatus = 0;
 1174              		.loc 1 494 0
 1175 08fe 4FF00003 		mov	r3, #0
 1176 0902 FB73     		strb	r3, [r7, #15]
 495:../selftest.c ****   /* ADCperipheral[PerIdx] Regular Channel Config */  
 496:../selftest.c ****   ADC_RegularChannelConfig(ADC1, ADC_Channel_2, 1, ADC_SampleTime_56Cycles);
 1177              		.loc 1 496 0
 1178 0904 4FF40050 		mov	r0, #8192
 1179 0908 C4F20100 		movt	r0, 16385
 1180 090c 4FF00201 		mov	r1, #2
 1181 0910 4FF00102 		mov	r2, #1
 1182 0914 4FF00303 		mov	r3, #3
 1183 0918 FFF7FEFF 		bl	ADC_RegularChannelConfig
 497:../selftest.c ****   /* ADCperipheral[PerIdx] Regular Channel Config */  
 498:../selftest.c ****   ADC_RegularChannelConfig(ADC2, ADC_Channel_3, 1, ADC_SampleTime_56Cycles);
 1184              		.loc 1 498 0
 1185 091c 4FF40450 		mov	r0, #8448
 1186 0920 C4F20100 		movt	r0, 16385
 1187 0924 4FF00301 		mov	r1, #3
 1188 0928 4FF00102 		mov	r2, #1
 1189 092c 4FF00303 		mov	r3, #3
 1190 0930 FFF7FEFF 		bl	ADC_RegularChannelConfig
 499:../selftest.c ****   /* Enable ADC1 */
 500:../selftest.c ****   ADC_Cmd(ADC1, ENABLE);
 1191              		.loc 1 500 0
 1192 0934 4FF40050 		mov	r0, #8192
 1193 0938 C4F20100 		movt	r0, 16385
 1194 093c 4FF00101 		mov	r1, #1
 1195 0940 FFF7FEFF 		bl	ADC_Cmd
 501:../selftest.c ****   ADC_Cmd(ADC2, ENABLE);
 1196              		.loc 1 501 0
 1197 0944 4FF40450 		mov	r0, #8448
 1198 0948 C4F20100 		movt	r0, 16385
 1199 094c 4FF00101 		mov	r1, #1
 1200 0950 FFF7FEFF 		bl	ADC_Cmd
 502:../selftest.c ****  
 503:../selftest.c ****   TimingDelay = 500;
 1201              		.loc 1 503 0
 1202 0954 40F20003 		movw	r3, #:lower16:TimingDelay
 1203 0958 C0F20003 		movt	r3, #:upper16:TimingDelay
 1204 095c 4FF4FA72 		mov	r2, #500
 1205 0960 1A60     		str	r2, [r3, #0]
 504:../selftest.c ****   /* Wait until detecting 500 data*/
 505:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1206              		.loc 1 505 0
 1207 0962 A0E0     		b	.L29
 1208              	.L35:
 506:../selftest.c ****   {
 507:../selftest.c ****     ADC_SoftwareStartConv(ADC1);
 1209              		.loc 1 507 0
 1210 0964 4FF40050 		mov	r0, #8192
 1211 0968 C4F20100 		movt	r0, 16385
 1212 096c FFF7FEFF 		bl	ADC_SoftwareStartConv
 508:../selftest.c ****     while(ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC) == RESET);
 1213              		.loc 1 508 0
 1214 0970 00BF     		nop
 1215              	.L30:
 1216              		.loc 1 508 0 is_stmt 0 discriminator 1
 1217 0972 4FF40050 		mov	r0, #8192
 1218 0976 C4F20100 		movt	r0, 16385
 1219 097a 4FF00201 		mov	r1, #2
 1220 097e FFF7FEFF 		bl	ADC_GetFlagStatus
 1221 0982 0346     		mov	r3, r0
 1222 0984 002B     		cmp	r3, #0
 1223 0986 F4D0     		beq	.L30
 509:../selftest.c ****     ConvData1 = ADC_GetConversionValue(ADC1); 
 1224              		.loc 1 509 0 is_stmt 1
 1225 0988 4FF40050 		mov	r0, #8192
 1226 098c C4F20100 		movt	r0, 16385
 1227 0990 FFF7FEFF 		bl	ADC_GetConversionValue
 1228 0994 0346     		mov	r3, r0
 1229 0996 1A46     		mov	r2, r3
 1230 0998 40F20003 		movw	r3, #:lower16:ConvData1
 1231 099c C0F20003 		movt	r3, #:upper16:ConvData1
 1232 09a0 1A80     		strh	r2, [r3, #0]	@ movhi
 510:../selftest.c **** 
 511:../selftest.c ****     ADC_SoftwareStartConv(ADC2);
 1233              		.loc 1 511 0
 1234 09a2 4FF40450 		mov	r0, #8448
 1235 09a6 C4F20100 		movt	r0, 16385
 1236 09aa FFF7FEFF 		bl	ADC_SoftwareStartConv
 512:../selftest.c ****     while(ADC_GetFlagStatus(ADC2, ADC_FLAG_EOC) == RESET);
 1237              		.loc 1 512 0
 1238 09ae 00BF     		nop
 1239              	.L31:
 1240              		.loc 1 512 0 is_stmt 0 discriminator 1
 1241 09b0 4FF40450 		mov	r0, #8448
 1242 09b4 C4F20100 		movt	r0, 16385
 1243 09b8 4FF00201 		mov	r1, #2
 1244 09bc FFF7FEFF 		bl	ADC_GetFlagStatus
 1245 09c0 0346     		mov	r3, r0
 1246 09c2 002B     		cmp	r3, #0
 1247 09c4 F4D0     		beq	.L31
 513:../selftest.c ****     ConvData2 = ADC_GetConversionValue(ADC2);
 1248              		.loc 1 513 0 is_stmt 1
 1249 09c6 4FF40450 		mov	r0, #8448
 1250 09ca C4F20100 		movt	r0, 16385
 1251 09ce FFF7FEFF 		bl	ADC_GetConversionValue
 1252 09d2 0346     		mov	r3, r0
 1253 09d4 1A46     		mov	r2, r3
 1254 09d6 40F20003 		movw	r3, #:lower16:ConvData2
 1255 09da C0F20003 		movt	r3, #:upper16:ConvData2
 1256 09de 1A80     		strh	r2, [r3, #0]	@ movhi
 514:../selftest.c ****     
 515:../selftest.c ****     /* 1.75V equals to 150 */
 516:../selftest.c ****     if ((ConvData1 > 150) && (ConvData2 < 10) && (counter1 != 500))
 1257              		.loc 1 516 0
 1258 09e0 40F20003 		movw	r3, #:lower16:ConvData1
 1259 09e4 C0F20003 		movt	r3, #:upper16:ConvData1
 1260 09e8 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1261 09ea 9BB2     		uxth	r3, r3
 1262 09ec 962B     		cmp	r3, #150
 1263 09ee 1ED9     		bls	.L32
 1264              		.loc 1 516 0 is_stmt 0 discriminator 1
 1265 09f0 40F20003 		movw	r3, #:lower16:ConvData2
 1266 09f4 C0F20003 		movt	r3, #:upper16:ConvData2
 1267 09f8 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1268 09fa 9BB2     		uxth	r3, r3
 1269 09fc 092B     		cmp	r3, #9
 1270 09fe 16D8     		bhi	.L32
 1271 0a00 40F20003 		movw	r3, #:lower16:counter1
 1272 0a04 C0F20003 		movt	r3, #:upper16:counter1
 1273 0a08 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1274 0a0a 9BB2     		uxth	r3, r3
 1275 0a0c B3F5FA7F 		cmp	r3, #500
 1276 0a10 0DD0     		beq	.L32
 517:../selftest.c ****     {
 518:../selftest.c ****       counter1 ++;
 1277              		.loc 1 518 0 is_stmt 1
 1278 0a12 40F20003 		movw	r3, #:lower16:counter1
 1279 0a16 C0F20003 		movt	r3, #:upper16:counter1
 1280 0a1a 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1281 0a1c 9BB2     		uxth	r3, r3
 1282 0a1e 03F10103 		add	r3, r3, #1
 1283 0a22 9AB2     		uxth	r2, r3
 1284 0a24 40F20003 		movw	r3, #:lower16:counter1
 1285 0a28 C0F20003 		movt	r3, #:upper16:counter1
 1286 0a2c 1A80     		strh	r2, [r3, #0]	@ movhi
 1287              	.L32:
 519:../selftest.c ****     }
 520:../selftest.c ****     if ((ConvData1 < 10) && (ConvData2 > 150) && (counter0 != 500))
 1288              		.loc 1 520 0
 1289 0a2e 40F20003 		movw	r3, #:lower16:ConvData1
 1290 0a32 C0F20003 		movt	r3, #:upper16:ConvData1
 1291 0a36 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1292 0a38 9BB2     		uxth	r3, r3
 1293 0a3a 092B     		cmp	r3, #9
 1294 0a3c 1ED8     		bhi	.L33
 1295              		.loc 1 520 0 is_stmt 0 discriminator 1
 1296 0a3e 40F20003 		movw	r3, #:lower16:ConvData2
 1297 0a42 C0F20003 		movt	r3, #:upper16:ConvData2
 1298 0a46 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1299 0a48 9BB2     		uxth	r3, r3
 1300 0a4a 962B     		cmp	r3, #150
 1301 0a4c 16D9     		bls	.L33
 1302 0a4e 40F20003 		movw	r3, #:lower16:counter0
 1303 0a52 C0F20003 		movt	r3, #:upper16:counter0
 1304 0a56 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1305 0a58 9BB2     		uxth	r3, r3
 1306 0a5a B3F5FA7F 		cmp	r3, #500
 1307 0a5e 0DD0     		beq	.L33
 521:../selftest.c ****     {
 522:../selftest.c ****       counter0 ++;
 1308              		.loc 1 522 0 is_stmt 1
 1309 0a60 40F20003 		movw	r3, #:lower16:counter0
 1310 0a64 C0F20003 		movt	r3, #:upper16:counter0
 1311 0a68 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1312 0a6a 9BB2     		uxth	r3, r3
 1313 0a6c 03F10103 		add	r3, r3, #1
 1314 0a70 9AB2     		uxth	r2, r3
 1315 0a72 40F20003 		movw	r3, #:lower16:counter0
 1316 0a76 C0F20003 		movt	r3, #:upper16:counter0
 1317 0a7a 1A80     		strh	r2, [r3, #0]	@ movhi
 1318              	.L33:
 523:../selftest.c ****     }
 524:../selftest.c ****     if((counter1 == 500) && (counter0 == 500))
 1319              		.loc 1 524 0
 1320 0a7c 40F20003 		movw	r3, #:lower16:counter1
 1321 0a80 C0F20003 		movt	r3, #:upper16:counter1
 1322 0a84 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1323 0a86 9BB2     		uxth	r3, r3
 1324 0a88 B3F5FA7F 		cmp	r3, #500
 1325 0a8c 0BD1     		bne	.L29
 1326              		.loc 1 524 0 is_stmt 0 discriminator 1
 1327 0a8e 40F20003 		movw	r3, #:lower16:counter0
 1328 0a92 C0F20003 		movt	r3, #:upper16:counter0
 1329 0a96 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1330 0a98 9BB2     		uxth	r3, r3
 1331 0a9a B3F5FA7F 		cmp	r3, #500
 1332 0a9e 02D1     		bne	.L29
 525:../selftest.c ****     {
 526:../selftest.c ****       audioteststatus = 1; 
 1333              		.loc 1 526 0 is_stmt 1
 1334 0aa0 4FF00103 		mov	r3, #1
 1335 0aa4 FB73     		strb	r3, [r7, #15]
 1336              	.L29:
 505:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1337              		.loc 1 505 0 discriminator 1
 1338 0aa6 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1339 0aa8 002B     		cmp	r3, #0
 1340 0aaa 07D1     		bne	.L34
 505:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1341              		.loc 1 505 0 is_stmt 0 discriminator 2
 1342 0aac 40F20003 		movw	r3, #:lower16:TimingDelay
 1343 0ab0 C0F20003 		movt	r3, #:upper16:TimingDelay
 1344 0ab4 1B68     		ldr	r3, [r3, #0]
 1345 0ab6 002B     		cmp	r3, #0
 1346 0ab8 7FF454AF 		bne	.L35
 1347              	.L34:
 527:../selftest.c ****     }
 528:../selftest.c ****   }
 529:../selftest.c ****   
 530:../selftest.c ****   /* Disable ADC Peripherals */ 
 531:../selftest.c ****   ADC_Cmd(ADC1, DISABLE);
 1348              		.loc 1 531 0 is_stmt 1
 1349 0abc 4FF40050 		mov	r0, #8192
 1350 0ac0 C4F20100 		movt	r0, 16385
 1351 0ac4 4FF00001 		mov	r1, #0
 1352 0ac8 FFF7FEFF 		bl	ADC_Cmd
 532:../selftest.c ****   ADC_Cmd(ADC2, DISABLE);
 1353              		.loc 1 532 0
 1354 0acc 4FF40450 		mov	r0, #8448
 1355 0ad0 C4F20100 		movt	r0, 16385
 1356 0ad4 4FF00001 		mov	r1, #0
 1357 0ad8 FFF7FEFF 		bl	ADC_Cmd
 533:../selftest.c ****   
 534:../selftest.c ****   /* Audio test status: FAIL */ 
 535:../selftest.c ****   if(audioteststatus == 0)
 1358              		.loc 1 535 0
 1359 0adc FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1360 0ade 002B     		cmp	r3, #0
 1361 0ae0 01D1     		bne	.L36
 536:../selftest.c ****   {
 537:../selftest.c ****     Fail_Handler();
 1362              		.loc 1 537 0
 1363 0ae2 FFF7FEFF 		bl	Fail_Handler
 1364              	.L36:
 538:../selftest.c ****   }
 539:../selftest.c ****   
 540:../selftest.c ****   EVAL_AUDIO_DeInit();
 1365              		.loc 1 540 0
 1366 0ae6 FFF7FEFF 		bl	EVAL_AUDIO_DeInit
 541:../selftest.c ****   EVAL_AUDIO_SetAudioInterface(AUDIO_INTERFACE_DAC);
 1367              		.loc 1 541 0
 1368 0aea 4FF00200 		mov	r0, #2
 1369 0aee FFF7FEFF 		bl	EVAL_AUDIO_SetAudioInterface
 542:../selftest.c ****   /* Initialize the Audio codec and all related peripherals (I2S, I2C, IOs...) */  
 543:../selftest.c ****   if (EVAL_AUDIO_Init(OUTPUT_DEVICE_HEADPHONE, 100, I2S_AudioFreq_48k) !=0)
 1370              		.loc 1 543 0
 1371 0af2 4FF00200 		mov	r0, #2
 1372 0af6 4FF06401 		mov	r1, #100
 1373 0afa 4BF68032 		movw	r2, #48000
 1374 0afe FFF7FEFF 		bl	EVAL_AUDIO_Init
 1375 0b02 0346     		mov	r3, r0
 1376 0b04 002B     		cmp	r3, #0
 1377 0b06 01D0     		beq	.L37
 544:../selftest.c ****   {
 545:../selftest.c ****     Fail_Handler();
 1378              		.loc 1 545 0
 1379 0b08 FFF7FEFF 		bl	Fail_Handler
 1380              	.L37:
 546:../selftest.c ****   }
 547:../selftest.c ****   
 548:../selftest.c ****   /* DAC code to be exectued under the I2S interrupt */
 549:../selftest.c ****   DACTest = 1;
 1381              		.loc 1 549 0
 1382 0b0c 40F20003 		movw	r3, #:lower16:DACTest
 1383 0b10 C0F20003 		movt	r3, #:upper16:DACTest
 1384 0b14 4FF00102 		mov	r2, #1
 1385 0b18 1A70     		strb	r2, [r3, #0]
 550:../selftest.c ****   counter1 = 0;
 1386              		.loc 1 550 0
 1387 0b1a 40F20003 		movw	r3, #:lower16:counter1
 1388 0b1e C0F20003 		movt	r3, #:upper16:counter1
 1389 0b22 4FF00002 		mov	r2, #0
 1390 0b26 1A80     		strh	r2, [r3, #0]	@ movhi
 551:../selftest.c ****   counter0 = 0;
 1391              		.loc 1 551 0
 1392 0b28 40F20003 		movw	r3, #:lower16:counter0
 1393 0b2c C0F20003 		movt	r3, #:upper16:counter0
 1394 0b30 4FF00002 		mov	r2, #0
 1395 0b34 1A80     		strh	r2, [r3, #0]	@ movhi
 552:../selftest.c ****   audioteststatus = 0;
 1396              		.loc 1 552 0
 1397 0b36 4FF00003 		mov	r3, #0
 1398 0b3a FB73     		strb	r3, [r7, #15]
 553:../selftest.c ****   
 554:../selftest.c ****   /* Enable ADC1 */
 555:../selftest.c ****   ADC_Cmd(ADC1, ENABLE);
 1399              		.loc 1 555 0
 1400 0b3c 4FF40050 		mov	r0, #8192
 1401 0b40 C4F20100 		movt	r0, 16385
 1402 0b44 4FF00101 		mov	r1, #1
 1403 0b48 FFF7FEFF 		bl	ADC_Cmd
 556:../selftest.c ****   ADC_Cmd(ADC2, ENABLE);
 1404              		.loc 1 556 0
 1405 0b4c 4FF40450 		mov	r0, #8448
 1406 0b50 C4F20100 		movt	r0, 16385
 1407 0b54 4FF00101 		mov	r1, #1
 1408 0b58 FFF7FEFF 		bl	ADC_Cmd
 557:../selftest.c ****   
 558:../selftest.c ****   TimingDelay = 500;
 1409              		.loc 1 558 0
 1410 0b5c 40F20003 		movw	r3, #:lower16:TimingDelay
 1411 0b60 C0F20003 		movt	r3, #:upper16:TimingDelay
 1412 0b64 4FF4FA72 		mov	r2, #500
 1413 0b68 1A60     		str	r2, [r3, #0]
 559:../selftest.c ****   /* Wait until detecting 50 data*/
 560:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1414              		.loc 1 560 0
 1415 0b6a A0E0     		b	.L38
 1416              	.L44:
 561:../selftest.c ****   {
 562:../selftest.c ****     
 563:../selftest.c ****     ADC_SoftwareStartConv(ADC1);
 1417              		.loc 1 563 0
 1418 0b6c 4FF40050 		mov	r0, #8192
 1419 0b70 C4F20100 		movt	r0, 16385
 1420 0b74 FFF7FEFF 		bl	ADC_SoftwareStartConv
 564:../selftest.c ****     while(ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC) == RESET);
 1421              		.loc 1 564 0
 1422 0b78 00BF     		nop
 1423              	.L39:
 1424              		.loc 1 564 0 is_stmt 0 discriminator 1
 1425 0b7a 4FF40050 		mov	r0, #8192
 1426 0b7e C4F20100 		movt	r0, 16385
 1427 0b82 4FF00201 		mov	r1, #2
 1428 0b86 FFF7FEFF 		bl	ADC_GetFlagStatus
 1429 0b8a 0346     		mov	r3, r0
 1430 0b8c 002B     		cmp	r3, #0
 1431 0b8e F4D0     		beq	.L39
 565:../selftest.c ****     
 566:../selftest.c ****     ConvData1 = ADC_GetConversionValue(ADC1); 
 1432              		.loc 1 566 0 is_stmt 1
 1433 0b90 4FF40050 		mov	r0, #8192
 1434 0b94 C4F20100 		movt	r0, 16385
 1435 0b98 FFF7FEFF 		bl	ADC_GetConversionValue
 1436 0b9c 0346     		mov	r3, r0
 1437 0b9e 1A46     		mov	r2, r3
 1438 0ba0 40F20003 		movw	r3, #:lower16:ConvData1
 1439 0ba4 C0F20003 		movt	r3, #:upper16:ConvData1
 1440 0ba8 1A80     		strh	r2, [r3, #0]	@ movhi
 567:../selftest.c ****     
 568:../selftest.c ****     ADC_SoftwareStartConv(ADC2);
 1441              		.loc 1 568 0
 1442 0baa 4FF40450 		mov	r0, #8448
 1443 0bae C4F20100 		movt	r0, 16385
 1444 0bb2 FFF7FEFF 		bl	ADC_SoftwareStartConv
 569:../selftest.c ****     while(ADC_GetFlagStatus(ADC2, ADC_FLAG_EOC) == RESET);
 1445              		.loc 1 569 0
 1446 0bb6 00BF     		nop
 1447              	.L40:
 1448              		.loc 1 569 0 is_stmt 0 discriminator 1
 1449 0bb8 4FF40450 		mov	r0, #8448
 1450 0bbc C4F20100 		movt	r0, 16385
 1451 0bc0 4FF00201 		mov	r1, #2
 1452 0bc4 FFF7FEFF 		bl	ADC_GetFlagStatus
 1453 0bc8 0346     		mov	r3, r0
 1454 0bca 002B     		cmp	r3, #0
 1455 0bcc F4D0     		beq	.L40
 570:../selftest.c ****     
 571:../selftest.c ****     ConvData2 = ADC_GetConversionValue(ADC2);
 1456              		.loc 1 571 0 is_stmt 1
 1457 0bce 4FF40450 		mov	r0, #8448
 1458 0bd2 C4F20100 		movt	r0, 16385
 1459 0bd6 FFF7FEFF 		bl	ADC_GetConversionValue
 1460 0bda 0346     		mov	r3, r0
 1461 0bdc 1A46     		mov	r2, r3
 1462 0bde 40F20003 		movw	r3, #:lower16:ConvData2
 1463 0be2 C0F20003 		movt	r3, #:upper16:ConvData2
 1464 0be6 1A80     		strh	r2, [r3, #0]	@ movhi
 572:../selftest.c ****     
 573:../selftest.c ****     /* 2.0V equals to 170 */
 574:../selftest.c ****     if ((ConvData1 > 170) && (ConvData2 > 170) &&(counter1 != 500))
 1465              		.loc 1 574 0
 1466 0be8 40F20003 		movw	r3, #:lower16:ConvData1
 1467 0bec C0F20003 		movt	r3, #:upper16:ConvData1
 1468 0bf0 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1469 0bf2 9BB2     		uxth	r3, r3
 1470 0bf4 AA2B     		cmp	r3, #170
 1471 0bf6 1ED9     		bls	.L41
 1472              		.loc 1 574 0 is_stmt 0 discriminator 1
 1473 0bf8 40F20003 		movw	r3, #:lower16:ConvData2
 1474 0bfc C0F20003 		movt	r3, #:upper16:ConvData2
 1475 0c00 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1476 0c02 9BB2     		uxth	r3, r3
 1477 0c04 AA2B     		cmp	r3, #170
 1478 0c06 16D9     		bls	.L41
 1479 0c08 40F20003 		movw	r3, #:lower16:counter1
 1480 0c0c C0F20003 		movt	r3, #:upper16:counter1
 1481 0c10 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1482 0c12 9BB2     		uxth	r3, r3
 1483 0c14 B3F5FA7F 		cmp	r3, #500
 1484 0c18 0DD0     		beq	.L41
 575:../selftest.c ****     {
 576:../selftest.c ****       counter1 ++;
 1485              		.loc 1 576 0 is_stmt 1
 1486 0c1a 40F20003 		movw	r3, #:lower16:counter1
 1487 0c1e C0F20003 		movt	r3, #:upper16:counter1
 1488 0c22 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1489 0c24 9BB2     		uxth	r3, r3
 1490 0c26 03F10103 		add	r3, r3, #1
 1491 0c2a 9AB2     		uxth	r2, r3
 1492 0c2c 40F20003 		movw	r3, #:lower16:counter1
 1493 0c30 C0F20003 		movt	r3, #:upper16:counter1
 1494 0c34 1A80     		strh	r2, [r3, #0]	@ movhi
 1495              	.L41:
 577:../selftest.c ****     }
 578:../selftest.c ****     if ((ConvData1 < 10) && (ConvData2 < 10) && (counter0 != 500))
 1496              		.loc 1 578 0
 1497 0c36 40F20003 		movw	r3, #:lower16:ConvData1
 1498 0c3a C0F20003 		movt	r3, #:upper16:ConvData1
 1499 0c3e 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1500 0c40 9BB2     		uxth	r3, r3
 1501 0c42 092B     		cmp	r3, #9
 1502 0c44 1ED8     		bhi	.L42
 1503              		.loc 1 578 0 is_stmt 0 discriminator 1
 1504 0c46 40F20003 		movw	r3, #:lower16:ConvData2
 1505 0c4a C0F20003 		movt	r3, #:upper16:ConvData2
 1506 0c4e 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1507 0c50 9BB2     		uxth	r3, r3
 1508 0c52 092B     		cmp	r3, #9
 1509 0c54 16D8     		bhi	.L42
 1510 0c56 40F20003 		movw	r3, #:lower16:counter0
 1511 0c5a C0F20003 		movt	r3, #:upper16:counter0
 1512 0c5e 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1513 0c60 9BB2     		uxth	r3, r3
 1514 0c62 B3F5FA7F 		cmp	r3, #500
 1515 0c66 0DD0     		beq	.L42
 579:../selftest.c ****     {
 580:../selftest.c ****       counter0 ++;
 1516              		.loc 1 580 0 is_stmt 1
 1517 0c68 40F20003 		movw	r3, #:lower16:counter0
 1518 0c6c C0F20003 		movt	r3, #:upper16:counter0
 1519 0c70 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1520 0c72 9BB2     		uxth	r3, r3
 1521 0c74 03F10103 		add	r3, r3, #1
 1522 0c78 9AB2     		uxth	r2, r3
 1523 0c7a 40F20003 		movw	r3, #:lower16:counter0
 1524 0c7e C0F20003 		movt	r3, #:upper16:counter0
 1525 0c82 1A80     		strh	r2, [r3, #0]	@ movhi
 1526              	.L42:
 581:../selftest.c ****     }
 582:../selftest.c ****     if((counter1 == 500) && (counter0 == 500))
 1527              		.loc 1 582 0
 1528 0c84 40F20003 		movw	r3, #:lower16:counter1
 1529 0c88 C0F20003 		movt	r3, #:upper16:counter1
 1530 0c8c 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1531 0c8e 9BB2     		uxth	r3, r3
 1532 0c90 B3F5FA7F 		cmp	r3, #500
 1533 0c94 0BD1     		bne	.L38
 1534              		.loc 1 582 0 is_stmt 0 discriminator 1
 1535 0c96 40F20003 		movw	r3, #:lower16:counter0
 1536 0c9a C0F20003 		movt	r3, #:upper16:counter0
 1537 0c9e 1B88     		ldrh	r3, [r3, #0]	@ movhi
 1538 0ca0 9BB2     		uxth	r3, r3
 1539 0ca2 B3F5FA7F 		cmp	r3, #500
 1540 0ca6 02D1     		bne	.L38
 583:../selftest.c ****     {
 584:../selftest.c ****       audioteststatus = 1; 
 1541              		.loc 1 584 0 is_stmt 1
 1542 0ca8 4FF00103 		mov	r3, #1
 1543 0cac FB73     		strb	r3, [r7, #15]
 1544              	.L38:
 560:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1545              		.loc 1 560 0 discriminator 1
 1546 0cae FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1547 0cb0 002B     		cmp	r3, #0
 1548 0cb2 07D1     		bne	.L43
 560:../selftest.c ****   while((audioteststatus == 0)&&(TimingDelay != 0))
 1549              		.loc 1 560 0 is_stmt 0 discriminator 2
 1550 0cb4 40F20003 		movw	r3, #:lower16:TimingDelay
 1551 0cb8 C0F20003 		movt	r3, #:upper16:TimingDelay
 1552 0cbc 1B68     		ldr	r3, [r3, #0]
 1553 0cbe 002B     		cmp	r3, #0
 1554 0cc0 7FF454AF 		bne	.L44
 1555              	.L43:
 585:../selftest.c ****     }
 586:../selftest.c ****   }
 587:../selftest.c ****   
 588:../selftest.c ****   /* Audio test status: FAIL */ 
 589:../selftest.c ****   if(audioteststatus == 0x00)
 1556              		.loc 1 589 0 is_stmt 1
 1557 0cc4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1558 0cc6 002B     		cmp	r3, #0
 1559 0cc8 01D1     		bne	.L45
 590:../selftest.c ****   {
 591:../selftest.c ****     Fail_Handler();
 1560              		.loc 1 591 0
 1561 0cca FFF7FEFF 		bl	Fail_Handler
 1562              	.L45:
 592:../selftest.c ****   }
 593:../selftest.c ****   
 594:../selftest.c ****   /* Turn Green LED ON: signaling Audio USB Test part2 PASS */
 595:../selftest.c ****   STM_EVAL_LEDOn(LED4);
 1563              		.loc 1 595 0
 1564 0cce 4FF00000 		mov	r0, #0
 1565 0cd2 FFF7FEFF 		bl	STM_EVAL_LEDOn
 596:../selftest.c ****   
 597:../selftest.c ****   /* Waiting User_Button pressed */
 598:../selftest.c ****   while (STM_EVAL_PBGetState(BUTTON_USER) == Bit_RESET)
 1566              		.loc 1 598 0
 1567 0cd6 00BF     		nop
 1568              	.L46:
 1569              		.loc 1 598 0 is_stmt 0 discriminator 1
 1570 0cd8 4FF00000 		mov	r0, #0
 1571 0cdc FFF7FEFF 		bl	STM_EVAL_PBGetState
 1572 0ce0 0346     		mov	r3, r0
 1573 0ce2 002B     		cmp	r3, #0
 1574 0ce4 F8D0     		beq	.L46
 599:../selftest.c ****   {}
 600:../selftest.c ****   
 601:../selftest.c ****   /* Turn Green LED OFF: signaling the end of Audio USB Test part2 */
 602:../selftest.c ****   STM_EVAL_LEDOff(LED4);
 1575              		.loc 1 602 0 is_stmt 1
 1576 0ce6 4FF00000 		mov	r0, #0
 1577 0cea FFF7FEFF 		bl	STM_EVAL_LEDOff
 603:../selftest.c **** }
 1578              		.loc 1 603 0
 1579 0cee 07F11007 		add	r7, r7, #16
 1580 0cf2 BD46     		mov	sp, r7
 1581 0cf4 80BD     		pop	{r7, pc}
 1582              		.cfi_endproc
 1583              	.LFE112:
 1585 0cf6 00BF     		.align	2
 1586              		.global	Microphone_MEMS_Test
 1587              		.thumb
 1588              		.thumb_func
 1590              	Microphone_MEMS_Test:
 1591              	.LFB113:
 604:../selftest.c **** 
 605:../selftest.c **** /**
 606:../selftest.c ****   * @brief Test Micophone MEMS Hardware.
 607:../selftest.c ****   *   The main objectif of this test is to check the hardware connection of the 
 608:../selftest.c ****   *   Microphone MEMS peripheral.
 609:../selftest.c ****   * @param None
 610:../selftest.c ****   * @retval None
 611:../selftest.c ****   */
 612:../selftest.c **** void Microphone_MEMS_Test(void)
 613:../selftest.c **** {
 1592              		.loc 1 613 0
 1593              		.cfi_startproc
 1594              		@ args = 0, pretend = 0, frame = 32
 1595              		@ frame_needed = 1, uses_anonymous_args = 0
 1596 0cf8 80B5     		push	{r7, lr}
 1597              	.LCFI9:
 1598              		.cfi_def_cfa_offset 8
 1599              		.cfi_offset 14, -4
 1600              		.cfi_offset 7, -8
 1601 0cfa 88B0     		sub	sp, sp, #32
 1602              	.LCFI10:
 1603              		.cfi_def_cfa_offset 40
 1604 0cfc 00AF     		add	r7, sp, #0
 1605              	.LCFI11:
 1606              		.cfi_def_cfa_register 7
 614:../selftest.c ****   uint16_t data = 0x00;
 1607              		.loc 1 614 0
 1608 0cfe 4FF00003 		mov	r3, #0
 1609 0d02 BB83     		strh	r3, [r7, #28]	@ movhi
 615:../selftest.c ****   uint8_t index = 0x00;
 1610              		.loc 1 615 0
 1611 0d04 4FF00003 		mov	r3, #0
 1612 0d08 FB77     		strb	r3, [r7, #31]
 616:../selftest.c ****   I2S_InitTypeDef  I2S_InitStructure;
 617:../selftest.c ****   GPIO_InitTypeDef GPIO_InitStructure;
 618:../selftest.c **** 
 619:../selftest.c ****   /* Enable the SPI clock */
 620:../selftest.c ****   RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI2, ENABLE);
 1613              		.loc 1 620 0
 1614 0d0a 4FF48040 		mov	r0, #16384
 1615 0d0e 4FF00101 		mov	r1, #1
 1616 0d12 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 621:../selftest.c **** 
 622:../selftest.c ****   /* Enable GPIO clocks */
 623:../selftest.c ****   RCC_AHB1PeriphClockCmd(SPI_SCK_GPIO_CLK | SPI_MOSI_GPIO_CLK, ENABLE);
 1617              		.loc 1 623 0
 1618 0d16 4FF00600 		mov	r0, #6
 1619 0d1a 4FF00101 		mov	r1, #1
 1620 0d1e FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 624:../selftest.c **** 
 625:../selftest.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 1621              		.loc 1 625 0
 1622 0d22 4FF00203 		mov	r3, #2
 1623 0d26 3B72     		strb	r3, [r7, #8]
 626:../selftest.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 1624              		.loc 1 626 0
 1625 0d28 4FF00003 		mov	r3, #0
 1626 0d2c BB72     		strb	r3, [r7, #10]
 627:../selftest.c ****   GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_UP;
 1627              		.loc 1 627 0
 1628 0d2e 4FF00103 		mov	r3, #1
 1629 0d32 FB72     		strb	r3, [r7, #11]
 628:../selftest.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_25MHz;
 1630              		.loc 1 628 0
 1631 0d34 4FF00103 		mov	r3, #1
 1632 0d38 7B72     		strb	r3, [r7, #9]
 629:../selftest.c **** 
 630:../selftest.c ****   /* SPI SCK pin configuration */
 631:../selftest.c ****   GPIO_InitStructure.GPIO_Pin = SPI_SCK_PIN;
 1633              		.loc 1 631 0
 1634 0d3a 4FF48063 		mov	r3, #1024
 1635 0d3e 7B60     		str	r3, [r7, #4]
 632:../selftest.c ****   GPIO_Init(SPI_SCK_GPIO_PORT, &GPIO_InitStructure);
 1636              		.loc 1 632 0
 1637 0d40 4FF48060 		mov	r0, #1024
 1638 0d44 C4F20200 		movt	r0, 16386
 1639 0d48 07F10403 		add	r3, r7, #4
 1640 0d4c 1946     		mov	r1, r3
 1641 0d4e FFF7FEFF 		bl	GPIO_Init
 633:../selftest.c ****   
 634:../selftest.c ****   /* Connect SPI pins to AF5 */  
 635:../selftest.c ****   GPIO_PinAFConfig(SPI_SCK_GPIO_PORT, SPI_SCK_SOURCE, SPI_SCK_AF);
 1642              		.loc 1 635 0
 1643 0d52 4FF48060 		mov	r0, #1024
 1644 0d56 C4F20200 		movt	r0, 16386
 1645 0d5a 4FF00A01 		mov	r1, #10
 1646 0d5e 4FF00502 		mov	r2, #5
 1647 0d62 FFF7FEFF 		bl	GPIO_PinAFConfig
 636:../selftest.c ****   
 637:../selftest.c ****   /* SPI MOSI pin configuration */
 638:../selftest.c ****   GPIO_InitStructure.GPIO_Pin =  SPI_MOSI_PIN;
 1648              		.loc 1 638 0
 1649 0d66 4FF00803 		mov	r3, #8
 1650 0d6a 7B60     		str	r3, [r7, #4]
 639:../selftest.c ****   GPIO_Init(SPI_MOSI_GPIO_PORT, &GPIO_InitStructure);
 1651              		.loc 1 639 0
 1652 0d6c 4FF40060 		mov	r0, #2048
 1653 0d70 C4F20200 		movt	r0, 16386
 1654 0d74 07F10403 		add	r3, r7, #4
 1655 0d78 1946     		mov	r1, r3
 1656 0d7a FFF7FEFF 		bl	GPIO_Init
 640:../selftest.c ****   
 641:../selftest.c ****   GPIO_PinAFConfig(SPI_MOSI_GPIO_PORT, SPI_MOSI_SOURCE, SPI_MOSI_AF);
 1657              		.loc 1 641 0
 1658 0d7e 4FF40060 		mov	r0, #2048
 1659 0d82 C4F20200 		movt	r0, 16386
 1660 0d86 4FF00301 		mov	r1, #3
 1661 0d8a 4FF00502 		mov	r2, #5
 1662 0d8e FFF7FEFF 		bl	GPIO_PinAFConfig
 642:../selftest.c ****   
 643:../selftest.c ****   /* I2S configuration -------------------------------------------------------*/
 644:../selftest.c ****   SPI_I2S_DeInit(SPI2);
 1663              		.loc 1 644 0
 1664 0d92 4FF46050 		mov	r0, #14336
 1665 0d96 C4F20000 		movt	r0, 16384
 1666 0d9a FFF7FEFF 		bl	SPI_I2S_DeInit
 645:../selftest.c ****   I2S_InitStructure.I2S_AudioFreq = 64000;
 1667              		.loc 1 645 0
 1668 0d9e 4FF47A43 		mov	r3, #64000
 1669 0da2 7B61     		str	r3, [r7, #20]
 646:../selftest.c ****   I2S_InitStructure.I2S_Standard = I2S_Standard_MSB;
 1670              		.loc 1 646 0
 1671 0da4 4FF01003 		mov	r3, #16
 1672 0da8 FB81     		strh	r3, [r7, #14]	@ movhi
 647:../selftest.c ****   I2S_InitStructure.I2S_DataFormat = I2S_DataFormat_16b;
 1673              		.loc 1 647 0
 1674 0daa 4FF00003 		mov	r3, #0
 1675 0dae 3B82     		strh	r3, [r7, #16]	@ movhi
 648:../selftest.c ****   I2S_InitStructure.I2S_CPOL = I2S_CPOL_Low;
 1676              		.loc 1 648 0
 1677 0db0 4FF00003 		mov	r3, #0
 1678 0db4 3B83     		strh	r3, [r7, #24]	@ movhi
 649:../selftest.c ****   I2S_InitStructure.I2S_Mode = I2S_Mode_MasterRx;
 1679              		.loc 1 649 0
 1680 0db6 4FF44073 		mov	r3, #768
 1681 0dba BB81     		strh	r3, [r7, #12]	@ movhi
 650:../selftest.c ****   I2S_InitStructure.I2S_MCLKOutput = I2S_MCLKOutput_Disable;
 1682              		.loc 1 650 0
 1683 0dbc 4FF00003 		mov	r3, #0
 1684 0dc0 7B82     		strh	r3, [r7, #18]	@ movhi
 651:../selftest.c ****   /* Initialize the I2S peripheral with the structure above */
 652:../selftest.c ****   I2S_Init(SPI2, &I2S_InitStructure);
 1685              		.loc 1 652 0
 1686 0dc2 4FF46050 		mov	r0, #14336
 1687 0dc6 C4F20000 		movt	r0, 16384
 1688 0dca 07F10C03 		add	r3, r7, #12
 1689 0dce 1946     		mov	r1, r3
 1690 0dd0 FFF7FEFF 		bl	I2S_Init
 653:../selftest.c ****   
 654:../selftest.c ****   /* Enable the I2S peripheral */
 655:../selftest.c ****   I2S_Cmd(SPI2, ENABLE);
 1691              		.loc 1 655 0
 1692 0dd4 4FF46050 		mov	r0, #14336
 1693 0dd8 C4F20000 		movt	r0, 16384
 1694 0ddc 4FF00101 		mov	r1, #1
 1695 0de0 FFF7FEFF 		bl	I2S_Cmd
 656:../selftest.c ****   
 657:../selftest.c ****   /* Waiting until MEMS microphone ready : Wake-up Time */
 658:../selftest.c ****   Delay(10);
 1696              		.loc 1 658 0
 1697 0de4 4FF00A00 		mov	r0, #10
 1698 0de8 FFF7FEFF 		bl	Delay
 659:../selftest.c ****   
 660:../selftest.c ****   TimingDelay = 500;
 1699              		.loc 1 660 0
 1700 0dec 40F20003 		movw	r3, #:lower16:TimingDelay
 1701 0df0 C0F20003 		movt	r3, #:upper16:TimingDelay
 1702 0df4 4FF4FA72 		mov	r2, #500
 1703 0df8 1A60     		str	r2, [r3, #0]
 661:../selftest.c ****   /* Wait until detect the click on the MEMS microphone or TimeOut delay*/
 662:../selftest.c ****   while((index < 30) && (TimingDelay != 0x00))
 1704              		.loc 1 662 0
 1705 0dfa 23E0     		b	.L48
 1706              	.L54:
 663:../selftest.c ****   { 
 664:../selftest.c ****     /* Waiting RXNE Flag or TimeOut delay */
 665:../selftest.c ****     while((SPI_I2S_GetFlagStatus(SPI2, SPI_FLAG_RXNE) == RESET)&& (TimingDelay != 0x00))
 1707              		.loc 1 665 0
 1708 0dfc 00BF     		nop
 1709              	.L50:
 1710              		.loc 1 665 0 is_stmt 0 discriminator 1
 1711 0dfe 4FF46050 		mov	r0, #14336
 1712 0e02 C4F20000 		movt	r0, 16384
 1713 0e06 4FF00101 		mov	r1, #1
 1714 0e0a FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 1715 0e0e 0346     		mov	r3, r0
 1716 0e10 002B     		cmp	r3, #0
 1717 0e12 06D1     		bne	.L49
 1718              		.loc 1 665 0 discriminator 2
 1719 0e14 40F20003 		movw	r3, #:lower16:TimingDelay
 1720 0e18 C0F20003 		movt	r3, #:upper16:TimingDelay
 1721 0e1c 1B68     		ldr	r3, [r3, #0]
 1722 0e1e 002B     		cmp	r3, #0
 1723 0e20 EDD1     		bne	.L50
 1724              	.L49:
 666:../selftest.c ****     {}
 667:../selftest.c ****     data = SPI_I2S_ReceiveData(SPI2);
 1725              		.loc 1 667 0 is_stmt 1
 1726 0e22 4FF46050 		mov	r0, #14336
 1727 0e26 C4F20000 		movt	r0, 16384
 1728 0e2a FFF7FEFF 		bl	SPI_I2S_ReceiveData
 1729 0e2e 0346     		mov	r3, r0
 1730 0e30 BB83     		strh	r3, [r7, #28]	@ movhi
 668:../selftest.c ****     if (data == 0xFFFF)
 1731              		.loc 1 668 0
 1732 0e32 BA8B     		ldrh	r2, [r7, #28]
 1733 0e34 4FF6FF73 		movw	r3, #65535
 1734 0e38 9A42     		cmp	r2, r3
 1735 0e3a 03D1     		bne	.L48
 669:../selftest.c ****     {
 670:../selftest.c ****       index++;  
 1736              		.loc 1 670 0
 1737 0e3c FB7F     		ldrb	r3, [r7, #31]
 1738 0e3e 03F10103 		add	r3, r3, #1
 1739 0e42 FB77     		strb	r3, [r7, #31]
 1740              	.L48:
 662:../selftest.c ****   while((index < 30) && (TimingDelay != 0x00))
 1741              		.loc 1 662 0 discriminator 1
 1742 0e44 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1743 0e46 1D2B     		cmp	r3, #29
 1744 0e48 06D8     		bhi	.L51
 662:../selftest.c ****   while((index < 30) && (TimingDelay != 0x00))
 1745              		.loc 1 662 0 is_stmt 0 discriminator 2
 1746 0e4a 40F20003 		movw	r3, #:lower16:TimingDelay
 1747 0e4e C0F20003 		movt	r3, #:upper16:TimingDelay
 1748 0e52 1B68     		ldr	r3, [r3, #0]
 1749 0e54 002B     		cmp	r3, #0
 1750 0e56 D1D1     		bne	.L54
 1751              	.L51:
 671:../selftest.c ****     }
 672:../selftest.c ****   }
 673:../selftest.c ****   
 674:../selftest.c ****   /* MEMS microphone test status: Timeout occurs */
 675:../selftest.c ****   if(index != 30)
 1752              		.loc 1 675 0 is_stmt 1
 1753 0e58 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1754 0e5a 1E2B     		cmp	r3, #30
 1755 0e5c 01D0     		beq	.L47
 676:../selftest.c ****   {
 677:../selftest.c ****     Fail_Handler();
 1756              		.loc 1 677 0
 1757 0e5e FFF7FEFF 		bl	Fail_Handler
 1758              	.L47:
 678:../selftest.c ****   }
 679:../selftest.c **** }
 1759              		.loc 1 679 0
 1760 0e62 07F12007 		add	r7, r7, #32
 1761 0e66 BD46     		mov	sp, r7
 1762 0e68 80BD     		pop	{r7, pc}
 1763              		.cfi_endproc
 1764              	.LFE113:
 1766 0e6a 00BF     		.align	2
 1767              		.global	EVAL_AUDIO_TransferComplete_CallBack
 1768              		.thumb
 1769              		.thumb_func
 1771              	EVAL_AUDIO_TransferComplete_CallBack:
 1772              	.LFB114:
 680:../selftest.c **** 
 681:../selftest.c **** /*--------------------------------
 682:../selftest.c ****        Callbacks implementation:
 683:../selftest.c ****            the callbacks prototypes are defined in the stm324xg_eval_audio_codec.h file
 684:../selftest.c ****            and their implementation should be done in the user code if they are needed.
 685:../selftest.c ****            Below some examples of callback implementations.
 686:../selftest.c ****                                      --------------------------------------------------------*/
 687:../selftest.c **** /**
 688:../selftest.c ****   * @brief  Calculates the remaining file size and new position of the pointer.
 689:../selftest.c ****   * @param  None
 690:../selftest.c ****   * @retval None
 691:../selftest.c ****   */
 692:../selftest.c **** void EVAL_AUDIO_TransferComplete_CallBack(uint32_t pBuffer, uint32_t Size)
 693:../selftest.c **** {
 1773              		.loc 1 693 0
 1774              		.cfi_startproc
 1775              		@ args = 0, pretend = 0, frame = 8
 1776              		@ frame_needed = 1, uses_anonymous_args = 0
 1777              		@ link register save eliminated.
 1778 0e6c 80B4     		push	{r7}
 1779              	.LCFI12:
 1780              		.cfi_def_cfa_offset 4
 1781              		.cfi_offset 7, -4
 1782 0e6e 83B0     		sub	sp, sp, #12
 1783              	.LCFI13:
 1784              		.cfi_def_cfa_offset 16
 1785 0e70 00AF     		add	r7, sp, #0
 1786              	.LCFI14:
 1787              		.cfi_def_cfa_register 7
 1788 0e72 7860     		str	r0, [r7, #4]
 1789 0e74 3960     		str	r1, [r7, #0]
 694:../selftest.c ****   /* Calculate the remaining audio data in the file and the new size 
 695:../selftest.c ****      for the DMA transfer. If the Audio files size is less than the DMA max 
 696:../selftest.c ****      data transfer size, so there is no calculation to be done, just restart 
 697:../selftest.c ****      from the beginning of the file ... */
 698:../selftest.c ****   /* Check if the end of file has been reached */
 699:../selftest.c **** 
 700:../selftest.c **** }
 1790              		.loc 1 700 0
 1791 0e76 07F10C07 		add	r7, r7, #12
 1792 0e7a BD46     		mov	sp, r7
 1793 0e7c 80BC     		pop	{r7}
 1794 0e7e 7047     		bx	lr
 1795              		.cfi_endproc
 1796              	.LFE114:
 1798              		.align	2
 1799              		.global	EVAL_AUDIO_HalfTransfer_CallBack
 1800              		.thumb
 1801              		.thumb_func
 1803              	EVAL_AUDIO_HalfTransfer_CallBack:
 1804              	.LFB115:
 701:../selftest.c **** 
 702:../selftest.c **** /**
 703:../selftest.c ****   * @brief  Manages the DMA Half Transfer complete interrupt.
 704:../selftest.c ****   * @param  None
 705:../selftest.c ****   * @retval None
 706:../selftest.c ****   */
 707:../selftest.c **** void EVAL_AUDIO_HalfTransfer_CallBack(uint32_t pBuffer, uint32_t Size)
 708:../selftest.c **** {  
 1805              		.loc 1 708 0
 1806              		.cfi_startproc
 1807              		@ args = 0, pretend = 0, frame = 8
 1808              		@ frame_needed = 1, uses_anonymous_args = 0
 1809              		@ link register save eliminated.
 1810 0e80 80B4     		push	{r7}
 1811              	.LCFI15:
 1812              		.cfi_def_cfa_offset 4
 1813              		.cfi_offset 7, -4
 1814 0e82 83B0     		sub	sp, sp, #12
 1815              	.LCFI16:
 1816              		.cfi_def_cfa_offset 16
 1817 0e84 00AF     		add	r7, sp, #0
 1818              	.LCFI17:
 1819              		.cfi_def_cfa_register 7
 1820 0e86 7860     		str	r0, [r7, #4]
 1821 0e88 3960     		str	r1, [r7, #0]
 709:../selftest.c **** #ifdef AUDIO_MAL_MODE_CIRCULAR
 710:../selftest.c ****   
 711:../selftest.c ****   /* Display message on the LCD screen */
 712:../selftest.c ****   LCD_DisplayStringLine(Line8, " 1/2 Buffer Reached "); 
 713:../selftest.c ****   
 714:../selftest.c **** #endif /* AUDIO_MAL_MODE_CIRCULAR */
 715:../selftest.c ****   
 716:../selftest.c ****   /* Generally this interrupt routine is used to load the buffer when 
 717:../selftest.c ****   a streaming scheme is used: When first Half buffer is already transferred load 
 718:../selftest.c ****   the new data to the first half of buffer while DMA is transferring data from 
 719:../selftest.c ****   the second half. And when Transfer complete occurs, load the second half of 
 720:../selftest.c ****   the buffer while the DMA is transferring from the first half ... */
 721:../selftest.c ****   /* 
 722:../selftest.c ****     ...........
 723:../selftest.c ****                    */
 724:../selftest.c **** }
 1822              		.loc 1 724 0
 1823 0e8a 07F10C07 		add	r7, r7, #12
 1824 0e8e BD46     		mov	sp, r7
 1825 0e90 80BC     		pop	{r7}
 1826 0e92 7047     		bx	lr
 1827              		.cfi_endproc
 1828              	.LFE115:
 1830              		.align	2
 1831              		.global	EVAL_AUDIO_GetSampleCallBack
 1832              		.thumb
 1833              		.thumb_func
 1835              	EVAL_AUDIO_GetSampleCallBack:
 1836              	.LFB116:
 725:../selftest.c **** /**
 726:../selftest.c ****   * @brief  Get next data sample callback
 727:../selftest.c ****   * @param  None
 728:../selftest.c ****   * @retval Next data sample to be sent
 729:../selftest.c ****   */
 730:../selftest.c **** uint16_t EVAL_AUDIO_GetSampleCallBack(void)
 731:../selftest.c **** {
 1837              		.loc 1 731 0
 1838              		.cfi_startproc
 1839              		@ args = 0, pretend = 0, frame = 8
 1840              		@ frame_needed = 1, uses_anonymous_args = 0
 1841              		@ link register save eliminated.
 1842 0e94 80B4     		push	{r7}
 1843              	.LCFI18:
 1844              		.cfi_def_cfa_offset 4
 1845              		.cfi_offset 7, -4
 1846 0e96 83B0     		sub	sp, sp, #12
 1847              	.LCFI19:
 1848              		.cfi_def_cfa_offset 16
 1849 0e98 00AF     		add	r7, sp, #0
 1850              	.LCFI20:
 1851              		.cfi_def_cfa_register 7
 732:../selftest.c ****   uint16_t data = 0;
 1852              		.loc 1 732 0
 1853 0e9a 4FF00003 		mov	r3, #0
 1854 0e9e FB80     		strh	r3, [r7, #6]	@ movhi
 733:../selftest.c ****   
 734:../selftest.c ****   if (DACTest == 0)
 1855              		.loc 1 734 0
 1856 0ea0 40F20003 		movw	r3, #:lower16:DACTest
 1857 0ea4 C0F20003 		movt	r3, #:upper16:DACTest
 1858 0ea8 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 1859 0eaa 002B     		cmp	r3, #0
 1860 0eac 5CD1     		bne	.L58
 735:../selftest.c ****   {
 736:../selftest.c ****     if (Left_Right==0)
 1861              		.loc 1 736 0
 1862 0eae 40F20003 		movw	r3, #:lower16:Left_Right
 1863 0eb2 C0F20003 		movt	r3, #:upper16:Left_Right
 1864 0eb6 1B88     		ldrh	r3, [r3, #0]
 1865 0eb8 002B     		cmp	r3, #0
 1866 0eba 2AD1     		bne	.L59
 737:../selftest.c ****     {
 738:../selftest.c ****       /* Get the next sample to be sent */
 739:../selftest.c ****       data = sinebuf[count++];
 1867              		.loc 1 739 0
 1868 0ebc 40F20003 		movw	r3, #:lower16:count
 1869 0ec0 C0F20003 		movt	r3, #:upper16:count
 1870 0ec4 1A88     		ldrh	r2, [r3, #0]
 1871 0ec6 1146     		mov	r1, r2
 1872 0ec8 40F20003 		movw	r3, #:lower16:sinebuf
 1873 0ecc C0F20003 		movt	r3, #:upper16:sinebuf
 1874 0ed0 33F81130 		ldrh	r3, [r3, r1, lsl #1]
 1875 0ed4 FB80     		strh	r3, [r7, #6]	@ movhi
 1876 0ed6 02F10103 		add	r3, r2, #1
 1877 0eda 9AB2     		uxth	r2, r3
 1878 0edc 40F20003 		movw	r3, #:lower16:count
 1879 0ee0 C0F20003 		movt	r3, #:upper16:count
 1880 0ee4 1A80     		strh	r2, [r3, #0]	@ movhi
 740:../selftest.c ****       
 741:../selftest.c ****       if (count == 48)
 1881              		.loc 1 741 0
 1882 0ee6 40F20003 		movw	r3, #:lower16:count
 1883 0eea C0F20003 		movt	r3, #:upper16:count
 1884 0eee 1B88     		ldrh	r3, [r3, #0]
 1885 0ef0 302B     		cmp	r3, #48
 1886 0ef2 06D1     		bne	.L60
 742:../selftest.c ****       {
 743:../selftest.c ****         count = 0x00;
 1887              		.loc 1 743 0
 1888 0ef4 40F20003 		movw	r3, #:lower16:count
 1889 0ef8 C0F20003 		movt	r3, #:upper16:count
 1890 0efc 4FF00002 		mov	r2, #0
 1891 0f00 1A80     		strh	r2, [r3, #0]	@ movhi
 1892              	.L60:
 744:../selftest.c ****       }
 745:../selftest.c ****       Left_Right = 1;
 1893              		.loc 1 745 0
 1894 0f02 40F20003 		movw	r3, #:lower16:Left_Right
 1895 0f06 C0F20003 		movt	r3, #:upper16:Left_Right
 1896 0f0a 4FF00102 		mov	r2, #1
 1897 0f0e 1A80     		strh	r2, [r3, #0]	@ movhi
 1898 0f10 50E0     		b	.L61
 1899              	.L59:
 746:../selftest.c ****     }
 747:../selftest.c ****     else
 748:../selftest.c ****     {
 749:../selftest.c ****       /* Get the next sample to be sent */
 750:../selftest.c ****       data = sinebuf[count1++];
 1900              		.loc 1 750 0
 1901 0f12 40F20003 		movw	r3, #:lower16:count1
 1902 0f16 C0F20003 		movt	r3, #:upper16:count1
 1903 0f1a 1A88     		ldrh	r2, [r3, #0]
 1904 0f1c 1146     		mov	r1, r2
 1905 0f1e 40F20003 		movw	r3, #:lower16:sinebuf
 1906 0f22 C0F20003 		movt	r3, #:upper16:sinebuf
 1907 0f26 33F81130 		ldrh	r3, [r3, r1, lsl #1]
 1908 0f2a FB80     		strh	r3, [r7, #6]	@ movhi
 1909 0f2c 02F10103 		add	r3, r2, #1
 1910 0f30 9AB2     		uxth	r2, r3
 1911 0f32 40F20003 		movw	r3, #:lower16:count1
 1912 0f36 C0F20003 		movt	r3, #:upper16:count1
 1913 0f3a 1A80     		strh	r2, [r3, #0]	@ movhi
 751:../selftest.c ****       
 752:../selftest.c ****       if (count1 == 48)
 1914              		.loc 1 752 0
 1915 0f3c 40F20003 		movw	r3, #:lower16:count1
 1916 0f40 C0F20003 		movt	r3, #:upper16:count1
 1917 0f44 1B88     		ldrh	r3, [r3, #0]
 1918 0f46 302B     		cmp	r3, #48
 1919 0f48 06D1     		bne	.L62
 753:../selftest.c ****       {
 754:../selftest.c ****         count1 = 0x00;
 1920              		.loc 1 754 0
 1921 0f4a 40F20003 		movw	r3, #:lower16:count1
 1922 0f4e C0F20003 		movt	r3, #:upper16:count1
 1923 0f52 4FF00002 		mov	r2, #0
 1924 0f56 1A80     		strh	r2, [r3, #0]	@ movhi
 1925              	.L62:
 755:../selftest.c ****       }
 756:../selftest.c ****       Left_Right = 0;
 1926              		.loc 1 756 0
 1927 0f58 40F20003 		movw	r3, #:lower16:Left_Right
 1928 0f5c C0F20003 		movt	r3, #:upper16:Left_Right
 1929 0f60 4FF00002 		mov	r2, #0
 1930 0f64 1A80     		strh	r2, [r3, #0]	@ movhi
 1931 0f66 25E0     		b	.L61
 1932              	.L58:
 757:../selftest.c ****     }
 758:../selftest.c ****   }
 759:../selftest.c ****   else
 760:../selftest.c ****   {
 761:../selftest.c ****     /* Get the next sample to be sent */
 762:../selftest.c ****     data = 32768 + sinebuf[count++];
 1933              		.loc 1 762 0
 1934 0f68 40F20003 		movw	r3, #:lower16:count
 1935 0f6c C0F20003 		movt	r3, #:upper16:count
 1936 0f70 1A88     		ldrh	r2, [r3, #0]
 1937 0f72 1146     		mov	r1, r2
 1938 0f74 40F20003 		movw	r3, #:lower16:sinebuf
 1939 0f78 C0F20003 		movt	r3, #:upper16:sinebuf
 1940 0f7c 33F81130 		ldrh	r3, [r3, r1, lsl #1]
 1941 0f80 9BB2     		uxth	r3, r3
 1942 0f82 A3F50043 		sub	r3, r3, #32768
 1943 0f86 FB80     		strh	r3, [r7, #6]	@ movhi
 1944 0f88 02F10103 		add	r3, r2, #1
 1945 0f8c 9AB2     		uxth	r2, r3
 1946 0f8e 40F20003 		movw	r3, #:lower16:count
 1947 0f92 C0F20003 		movt	r3, #:upper16:count
 1948 0f96 1A80     		strh	r2, [r3, #0]	@ movhi
 763:../selftest.c **** 
 764:../selftest.c ****     if (count == 48)
 1949              		.loc 1 764 0
 1950 0f98 40F20003 		movw	r3, #:lower16:count
 1951 0f9c C0F20003 		movt	r3, #:upper16:count
 1952 0fa0 1B88     		ldrh	r3, [r3, #0]
 1953 0fa2 302B     		cmp	r3, #48
 1954 0fa4 06D1     		bne	.L61
 765:../selftest.c ****     {
 766:../selftest.c ****       count = 0x00;
 1955              		.loc 1 766 0
 1956 0fa6 40F20003 		movw	r3, #:lower16:count
 1957 0faa C0F20003 		movt	r3, #:upper16:count
 1958 0fae 4FF00002 		mov	r2, #0
 1959 0fb2 1A80     		strh	r2, [r3, #0]	@ movhi
 1960              	.L61:
 767:../selftest.c ****     }
 768:../selftest.c ****   }
 769:../selftest.c ****   return data;
 1961              		.loc 1 769 0
 1962 0fb4 FB88     		ldrh	r3, [r7, #6]
 770:../selftest.c **** }
 1963              		.loc 1 770 0
 1964 0fb6 1846     		mov	r0, r3
 1965 0fb8 07F10C07 		add	r7, r7, #12
 1966 0fbc BD46     		mov	sp, r7
 1967 0fbe 80BC     		pop	{r7}
 1968 0fc0 7047     		bx	lr
 1969              		.cfi_endproc
 1970              	.LFE116:
 1972 0fc2 00BF     		.align	2
 1973              		.global	EVAL_AUDIO_Error_CallBack
 1974              		.thumb
 1975              		.thumb_func
 1977              	EVAL_AUDIO_Error_CallBack:
 1978              	.LFB117:
 771:../selftest.c **** 
 772:../selftest.c **** 
 773:../selftest.c **** /**
 774:../selftest.c ****   * @brief  Manages the DMA FIFO error interrupt.
 775:../selftest.c ****   * @param  None
 776:../selftest.c ****   * @retval None
 777:../selftest.c ****   */
 778:../selftest.c **** void EVAL_AUDIO_Error_CallBack(void* pData)
 779:../selftest.c **** {
 1979              		.loc 1 779 0
 1980              		.cfi_startproc
 1981              		@ args = 0, pretend = 0, frame = 8
 1982              		@ frame_needed = 1, uses_anonymous_args = 0
 1983              		@ link register save eliminated.
 1984 0fc4 80B4     		push	{r7}
 1985              	.LCFI21:
 1986              		.cfi_def_cfa_offset 4
 1987              		.cfi_offset 7, -4
 1988 0fc6 83B0     		sub	sp, sp, #12
 1989              	.LCFI22:
 1990              		.cfi_def_cfa_offset 16
 1991 0fc8 00AF     		add	r7, sp, #0
 1992              	.LCFI23:
 1993              		.cfi_def_cfa_register 7
 1994 0fca 7860     		str	r0, [r7, #4]
 1995              	.L64:
 780:../selftest.c ****   /* Stop the program with an infinite loop */
 781:../selftest.c ****   while (1)
 782:../selftest.c ****   {}
 1996              		.loc 1 782 0 discriminator 1
 1997 0fcc FEE7     		b	.L64
 1998              		.cfi_endproc
 1999              	.LFE117:
 2001 0fce 00BF     		.align	2
 2002              		.global	Codec_TIMEOUT_UserCallback
 2003              		.thumb
 2004              		.thumb_func
 2006              	Codec_TIMEOUT_UserCallback:
 2007              	.LFB118:
 783:../selftest.c ****   
 784:../selftest.c ****   /* could also generate a system reset to recover from the error */
 785:../selftest.c ****   /* .... */
 786:../selftest.c **** }
 787:../selftest.c **** 
 788:../selftest.c **** #ifndef USE_DEFAULT_TIMEOUT_CALLBACK
 789:../selftest.c **** /**
 790:../selftest.c ****   * @brief  Basic management of the timeout situation.
 791:../selftest.c ****   * @param  None.
 792:../selftest.c ****   * @retval None.
 793:../selftest.c ****   */
 794:../selftest.c **** uint32_t Codec_TIMEOUT_UserCallback(void)
 795:../selftest.c **** {   
 2008              		.loc 1 795 0
 2009              		.cfi_startproc
 2010              		@ args = 0, pretend = 0, frame = 0
 2011              		@ frame_needed = 1, uses_anonymous_args = 0
 2012              		@ link register save eliminated.
 2013 0fd0 80B4     		push	{r7}
 2014              	.LCFI24:
 2015              		.cfi_def_cfa_offset 4
 2016              		.cfi_offset 7, -4
 2017 0fd2 00AF     		add	r7, sp, #0
 2018              	.LCFI25:
 2019              		.cfi_def_cfa_register 7
 2020              	.L66:
 796:../selftest.c ****   /* Block communication and all processes */
 797:../selftest.c ****   while (1)
 798:../selftest.c ****   {   
 799:../selftest.c ****   }
 2021              		.loc 1 799 0 discriminator 1
 2022 0fd4 FEE7     		b	.L66
 2023              		.cfi_endproc
 2024              	.LFE118:
 2026              	.Letext0:
 2027              		.file 2 "/Users/josefvanniekerk/Developer/Cross/arm-cs-tools-2012.03-56-e3f4013-20130305/lib/gcc/a
 2028              		.file 3 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries/
 2029              		.file 4 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries/
 2030              		.file 5 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries/
 2031              		.file 6 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries/
 2032              		.file 7 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries/
 2033              		.file 8 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../utilities/
 2034              		.file 9 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../utilities/
 2035              		.file 10 "/Users/josefvanniekerk/Projects/stm32f4-discovery/projects/demonstration/../../libraries
DEFINED SYMBOLS
                            *ABS*:0000000000000000 selftest.c
                            *COM*:0000000000000010 RCC_Clocks
                            *COM*:0000000000000018 ADC_InitStructure
                            *COM*:0000000000000010 ADC_CommonInitStructure
                            *COM*:0000000000000002 ConvData1
                            *COM*:0000000000000002 ConvData2
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:28     .bss:0000000000000000 counter0
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:25     .bss:0000000000000000 $d
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:34     .bss:0000000000000002 counter1
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:40     .bss:0000000000000004 Idx
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:47     .data:0000000000000000 ADC_Channel
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:44     .data:0000000000000000 $d
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:54     .bss:0000000000000006 DACTest
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:61     .data:0000000000000004 GPIO_Pin
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:69     .bss:0000000000000008 count
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:76     .data:0000000000000006 count1
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:83     .bss:000000000000000a Left_Right
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:90     .rodata:0000000000000000 sinebuf
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:87     .rodata:0000000000000000 $d
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:140    .text:0000000000000000 $t
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:145    .text:0000000000000000 Accelerometer_MEMS_Test
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:336    .text:0000000000000178 USB_Test
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1020   .text:0000000000000780 Audio_Test
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1590   .text:0000000000000cf8 Microphone_MEMS_Test
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1771   .text:0000000000000e6c EVAL_AUDIO_TransferComplete_CallBack
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1803   .text:0000000000000e80 EVAL_AUDIO_HalfTransfer_CallBack
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1835   .text:0000000000000e94 EVAL_AUDIO_GetSampleCallBack
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:1977   .text:0000000000000fc4 EVAL_AUDIO_Error_CallBack
/var/folders/29/q4vqrldx53dd1j615jflh8h40000gn/T//ccZWKTmc.s:2006   .text:0000000000000fd0 Codec_TIMEOUT_UserCallback
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
LIS302DL_InitStruct
LIS302DL_Init
LIS302DL_FilterStruct
LIS302DL_FilterConfig
Delay
LIS302DL_Read
Fail_Handler
TimingDelay
Buffer
STM_EVAL_LEDOn
STM_EVAL_PBGetState
STM_EVAL_LEDOff
RCC_AHB1PeriphClockCmd
GPIO_Init
GPIO_ResetBits
GPIO_ReadInputDataBit
GPIO_SetBits
RCC_APB2PeriphClockCmd
EVAL_AUDIO_SetAudioInterface
EVAL_AUDIO_Init
ADC_CommonInit
ADC_StructInit
ADC_Init
ADC_RegularChannelConfig
ADC_Cmd
ADC_SoftwareStartConv
ADC_GetFlagStatus
ADC_GetConversionValue
EVAL_AUDIO_DeInit
RCC_APB1PeriphClockCmd
GPIO_PinAFConfig
SPI_I2S_DeInit
I2S_Init
I2S_Cmd
SPI_I2S_GetFlagStatus
SPI_I2S_ReceiveData
